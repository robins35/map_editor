/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/asset_manager.js":
/*!******************************!*\
  !*** ./src/asset_manager.js ***!
  \******************************/
/*! exports provided: loadAssets, getImage, imgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadAssets\", function() { return loadAssets; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getImage\", function() { return getImage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"imgs\", function() { return imgs; });\n/* harmony import */ var _ui_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui/ui */ \"./src/ui/ui.js\");\n\n\nvar successCount = 0;\nvar errorCount = 0;\nvar imgs = {};\nvar imgPaths = [];\n\nvar isDone = function () {\n    return imgPaths.length == successCount + errorCount;\n};\n\nvar loadImagePaths = downloadCallback => {\n    $.ajax({\n        dataType: \"json\",\n        method: \"GET\",\n        url: '/load_images',\n        error: error => {\n            console.log(`ERROR: ${error}`);\n        },\n        success: data => {\n            imgPaths = data;\n            loadImages(downloadCallback);\n        }\n    });\n};\n\nvar loadImages = function (downloadCallback) {\n    var progressBar = new _ui_ui__WEBPACK_IMPORTED_MODULE_0__[\"UI\"].ProgressBar(Game.canvas, {\n        width: \"50%\",\n        height: 20,\n        alignment: \"center\",\n        verticalAlignment: \"middle\",\n        total: imgPaths.length,\n        backgroundColor: \"#ffffff\",\n        color: \"#ffffff\",\n        borderWidth: 2\n    });\n    Game.uiElements.push(progressBar);\n\n    if (imgPaths.length == 0) downloadCallback();\n    for (var i = 0; i < imgPaths.length; i++) {\n        (function (src) {\n            var image_type, image_name;\n            let imagePath = src.split('/').slice(-2);\n            image_type = imagePath[0];\n            image_name = imagePath[1].split('.').slice(0, -1).join('.');\n\n            if (imgs[image_type] === undefined) imgs[image_type] = {};\n\n            imgs[image_type][image_name] = new Image();\n\n            imgs[image_type][image_name].addEventListener(\"load\", function () {\n                successCount++;\n                progressBar.progress++;\n                if (isDone()) downloadCallback();\n            }, false);\n\n            imgs[image_type][image_name].addEventListener(\"error\", function () {\n                errorCount++;\n                console.log(`Error loading image ${this.src}`);\n                if (isDone()) downloadCallback();\n            }, false);\n\n            imgs[image_type][image_name].src = src;\n        })(imgPaths[i]);\n    }\n};\n\n// var loadAudio = function(downloadCallback) {\n//     if(imgPaths.length == 0) downloadCallback();\n// }\n\nvar loadAssets = function (downloadCallback) {\n    loadImagePaths(downloadCallback);\n};\n\nvar getImage = function (image_type, image_name) {\n    return imgs[image_type][image_name];\n};\n\n\n\n// var getAudio = function(name) {\n//     return snds[name];\n// }//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXNzZXRfbWFuYWdlci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYXNzZXRfbWFuYWdlci5qcz85NTE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVJIH0gZnJvbSAnLi91aS91aSdcblxudmFyIHN1Y2Nlc3NDb3VudCA9IDA7XG52YXIgZXJyb3JDb3VudCA9IDA7XG52YXIgaW1ncyA9IHt9O1xudmFyIGltZ1BhdGhzID0gW107XG5cbnZhciBpc0RvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKGltZ1BhdGhzLmxlbmd0aCA9PSAoc3VjY2Vzc0NvdW50ICsgZXJyb3JDb3VudCkpO1xufVxuXG52YXIgbG9hZEltYWdlUGF0aHMgPSAoZG93bmxvYWRDYWxsYmFjaykgPT4ge1xuICAkLmFqYXgoe1xuICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgdXJsOiAnL2xvYWRfaW1hZ2VzJyxcbiAgICBlcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgRVJST1I6ICR7ZXJyb3J9YClcbiAgICB9LFxuICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XG4gICAgICBpbWdQYXRocyA9IGRhdGFcbiAgICAgIGxvYWRJbWFnZXMoZG93bmxvYWRDYWxsYmFjaylcbiAgICB9XG4gIH0pO1xufVxuXG52YXIgbG9hZEltYWdlcyA9IGZ1bmN0aW9uKGRvd25sb2FkQ2FsbGJhY2spIHtcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSBuZXcgVUkuUHJvZ3Jlc3NCYXIoR2FtZS5jYW52YXMsIHtcbiAgICAgIHdpZHRoOiBcIjUwJVwiLFxuICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgIGFsaWdubWVudDogXCJjZW50ZXJcIixcbiAgICAgIHZlcnRpY2FsQWxpZ25tZW50OiBcIm1pZGRsZVwiLFxuICAgICAgdG90YWw6IGltZ1BhdGhzLmxlbmd0aCxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZmZmZmZmXCIsXG4gICAgICBjb2xvcjogXCIjZmZmZmZmXCIsXG4gICAgICBib3JkZXJXaWR0aDogMlxuICAgIH0pXG4gICAgR2FtZS51aUVsZW1lbnRzLnB1c2gocHJvZ3Jlc3NCYXIpXG5cbiAgICBpZiAoaW1nUGF0aHMubGVuZ3RoID09IDApIGRvd25sb2FkQ2FsbGJhY2soKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGltZ1BhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIChmdW5jdGlvbihzcmMpIHtcbiAgICAgICAgICAgIHZhciBpbWFnZV90eXBlLCBpbWFnZV9uYW1lXG4gICAgICAgICAgICBsZXQgaW1hZ2VQYXRoID0gc3JjLnNwbGl0KCcvJykuc2xpY2UoLTIpXG4gICAgICAgICAgICBpbWFnZV90eXBlID0gaW1hZ2VQYXRoWzBdXG4gICAgICAgICAgICBpbWFnZV9uYW1lID0gaW1hZ2VQYXRoWzFdLnNwbGl0KCcuJykuc2xpY2UoMCwgLTEpLmpvaW4oJy4nKVxuXG4gICAgICAgICAgICBpZihpbWdzW2ltYWdlX3R5cGVdID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgIGltZ3NbaW1hZ2VfdHlwZV0gPSB7fVxuXG4gICAgICAgICAgICBpbWdzW2ltYWdlX3R5cGVdW2ltYWdlX25hbWVdID0gbmV3IEltYWdlKClcblxuICAgICAgICAgICAgaW1nc1tpbWFnZV90eXBlXVtpbWFnZV9uYW1lXS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzQ291bnQrKztcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5wcm9ncmVzcysrXG4gICAgICAgICAgICAgICAgaWYgKGlzRG9uZSgpKSBkb3dubG9hZENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgICAgIGltZ3NbaW1hZ2VfdHlwZV1baW1hZ2VfbmFtZV0uYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGVycm9yQ291bnQrKztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgbG9hZGluZyBpbWFnZSAke3RoaXMuc3JjfWApXG4gICAgICAgICAgICAgICAgaWYgKGlzRG9uZSgpKSBkb3dubG9hZENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgICAgIGltZ3NbaW1hZ2VfdHlwZV1baW1hZ2VfbmFtZV0uc3JjID0gc3JjO1xuICAgICAgICB9KShpbWdQYXRoc1tpXSk7XG4gICAgfVxufVxuXG4vLyB2YXIgbG9hZEF1ZGlvID0gZnVuY3Rpb24oZG93bmxvYWRDYWxsYmFjaykge1xuLy8gICAgIGlmKGltZ1BhdGhzLmxlbmd0aCA9PSAwKSBkb3dubG9hZENhbGxiYWNrKCk7XG4vLyB9XG5cbnZhciBsb2FkQXNzZXRzID0gZnVuY3Rpb24oZG93bmxvYWRDYWxsYmFjaykge1xuICAgIGxvYWRJbWFnZVBhdGhzKGRvd25sb2FkQ2FsbGJhY2spXG59XG5cbnZhciBnZXRJbWFnZSA9IGZ1bmN0aW9uKGltYWdlX3R5cGUsIGltYWdlX25hbWUpIHtcbiAgICByZXR1cm4gaW1nc1tpbWFnZV90eXBlXVtpbWFnZV9uYW1lXTtcbn1cblxuZXhwb3J0IHsgbG9hZEFzc2V0cywgZ2V0SW1hZ2UsIGltZ3MgfVxuXG4vLyB2YXIgZ2V0QXVkaW8gPSBmdW5jdGlvbihuYW1lKSB7XG4vLyAgICAgcmV0dXJuIHNuZHNbbmFtZV07XG4vLyB9XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/asset_manager.js\n");

/***/ }),

/***/ "./src/collision.js":
/*!**************************!*\
  !*** ./src/collision.js ***!
  \**************************/
/*! exports provided: intersects, vectorSum, vectorDifference, vectorProduct, pointsAreEqual */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"intersects\", function() { return intersects; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"vectorSum\", function() { return vectorSum; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"vectorDifference\", function() { return vectorDifference; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"vectorProduct\", function() { return vectorProduct; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pointsAreEqual\", function() { return pointsAreEqual; });\nlet intersects = (obj, point, tolerance = 0, relative = false) => {\n  let objectPosition = relative ? obj.relativePos : obj.pos;\n  let xIntersect = point.x + tolerance > objectPosition.x && point.x - tolerance < objectPosition.x + obj.width;\n  let yIntersect = point.y + tolerance > objectPosition.y && point.y - tolerance < objectPosition.y + obj.height;\n  return xIntersect && yIntersect;\n};\n\nlet vectorSum = (vector1, vector2) => {\n  return {\n    x: vector1.x + vector2.x,\n    y: vector1.y + vector2.y\n  };\n};\n\nlet vectorDifference = (vector1, vector2) => {\n  return {\n    x: vector1.x - vector2.x,\n    y: vector1.y - vector2.y\n  };\n};\n\nlet vectorProduct = (constant, vector) => {\n  let newVector = {};\n  for (let key of Object.keys(vector)) newVector[key] = vector[key] * constant;\n\n  return newVector;\n};\n\nlet pointsAreEqual = (point1, point2) => {\n  return point1.x == point2.x && point1.y == point2.y;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29sbGlzaW9uLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9jb2xsaXNpb24uanM/MDlmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgaW50ZXJzZWN0cyA9IChvYmosIHBvaW50LCB0b2xlcmFuY2UgPSAwLCByZWxhdGl2ZSA9IGZhbHNlKSA9PiB7XG4gIGxldCBvYmplY3RQb3NpdGlvbiA9IHJlbGF0aXZlID8gb2JqLnJlbGF0aXZlUG9zIDogb2JqLnBvc1xuICBsZXQgeEludGVyc2VjdCA9IChwb2ludC54ICsgdG9sZXJhbmNlKSA+IG9iamVjdFBvc2l0aW9uLnggJiYgKHBvaW50LnggLSB0b2xlcmFuY2UpIDwgKG9iamVjdFBvc2l0aW9uLnggKyBvYmoud2lkdGgpXG4gIGxldCB5SW50ZXJzZWN0ID0gKHBvaW50LnkgKyB0b2xlcmFuY2UpID4gb2JqZWN0UG9zaXRpb24ueSAmJiAocG9pbnQueSAtIHRvbGVyYW5jZSkgPCAob2JqZWN0UG9zaXRpb24ueSArIG9iai5oZWlnaHQpXG4gIHJldHVybiAgeEludGVyc2VjdCAmJiB5SW50ZXJzZWN0O1xufVxuXG5sZXQgdmVjdG9yU3VtID0gKHZlY3RvcjEsIHZlY3RvcjIpID0+IHtcbiAgcmV0dXJuIHtcbiAgICB4OiB2ZWN0b3IxLnggKyB2ZWN0b3IyLngsXG4gICAgeTogdmVjdG9yMS55ICsgdmVjdG9yMi55XG4gIH1cbn1cblxubGV0IHZlY3RvckRpZmZlcmVuY2UgPSAodmVjdG9yMSwgdmVjdG9yMikgPT4ge1xuICByZXR1cm4ge1xuICAgIHg6IHZlY3RvcjEueCAtIHZlY3RvcjIueCxcbiAgICB5OiB2ZWN0b3IxLnkgLSB2ZWN0b3IyLnlcbiAgfVxufVxuXG5sZXQgdmVjdG9yUHJvZHVjdCA9IChjb25zdGFudCwgdmVjdG9yKSA9PiB7XG4gIGxldCBuZXdWZWN0b3IgPSB7fVxuICBmb3IobGV0IGtleSBvZiBPYmplY3Qua2V5cyh2ZWN0b3IpKVxuICAgIG5ld1ZlY3RvcltrZXldID0gdmVjdG9yW2tleV0gKiBjb25zdGFudFxuXG4gIHJldHVybiBuZXdWZWN0b3Jcbn1cblxubGV0IHBvaW50c0FyZUVxdWFsID0gKHBvaW50MSwgcG9pbnQyKSA9PiB7XG4gIHJldHVybiBwb2ludDEueCA9PSBwb2ludDIueCAmJiBwb2ludDEueSA9PSBwb2ludDIueVxufVxuXG5leHBvcnQgeyBpbnRlcnNlY3RzLCB2ZWN0b3JTdW0sIHZlY3RvckRpZmZlcmVuY2UsIHZlY3RvclByb2R1Y3QsIHBvaW50c0FyZUVxdWFsIH1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/collision.js\n");

/***/ }),

/***/ "./src/entity.js":
/*!***********************!*\
  !*** ./src/entity.js ***!
  \***********************/
/*! exports provided: Entity, EntityList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Entity\", function() { return Entity; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EntityList\", function() { return EntityList; });\nclass Entity {\n  constructor(x, y, width, height) {\n    Entity.id = Entity.id === undefined ? 1 : Entity.id;\n    this.name = \"Entity\";\n    this.id = Entity.id++;\n    this.pos = { x, y };\n    this.width = width;\n    this.height = height;\n    this.canvas = Game.canvas;\n    this.ctx = Game.ctx;\n  }\n\n  maxX() {\n    return this.canvas.width - this.width;\n  }\n\n  maxY() {\n    return this.canvas.height - this.height;\n  }\n\n  move(x, y) {\n    this.pos = { x, y };\n  }\n\n  safeMove(x, y) {\n    if (x > this.maxX()) this.pos.x = this.maxX();else if (x < 0) this.pos.x = 0;else this.pos.x = x;\n\n    if (y > this.maxY()) this.pos.y = this.maxY();else if (y < 0) this.pos.y = 0;else this.pos.y = y;\n  }\n}\n\nclass EntityList {\n  constructor() {\n    this.list = {};\n  }\n\n  push(entity) {\n    if (entity instanceof Array) {\n      for (let _entity of entity) {\n        this.push(_entity);\n      }\n    } else {\n      this.list[entity.id] = entity;\n    }\n  }\n\n  draw() {\n    for (let key of Object.keys(this.list)) {\n      this.list[key].draw();\n    }\n  }\n\n  update() {\n    for (let key of Object.keys(this.list)) {\n      if (this.list[key] == undefined) {\n        continue;\n      }\n      if (this.list[key].update != undefined) this.list[key].update();\n    }\n  }\n\n  clear() {\n    this.list = {};\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZW50aXR5LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9lbnRpdHkuanM/NWM2OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRW50aXR5IHtcbiAgY29uc3RydWN0b3IgKHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBFbnRpdHkuaWQgPSAoRW50aXR5LmlkID09PSB1bmRlZmluZWQpID8gMSA6IEVudGl0eS5pZFxuICAgIHRoaXMubmFtZSA9IFwiRW50aXR5XCJcbiAgICB0aGlzLmlkID0gRW50aXR5LmlkKytcbiAgICB0aGlzLnBvcyA9IHsgeCwgeSB9XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHRcbiAgICB0aGlzLmNhbnZhcyA9IEdhbWUuY2FudmFzXG4gICAgdGhpcy5jdHggPSBHYW1lLmN0eFxuICB9XG5cbiAgbWF4WCgpIHtcbiAgICByZXR1cm4gdGhpcy5jYW52YXMud2lkdGggLSB0aGlzLndpZHRoXG4gIH1cblxuICBtYXhZKCkge1xuICAgIHJldHVybiB0aGlzLmNhbnZhcy5oZWlnaHQgLSB0aGlzLmhlaWdodFxuICB9XG5cbiAgbW92ZSAoeCwgeSkge1xuICAgIHRoaXMucG9zID0geyB4LCB5IH1cbiAgfVxuXG4gIHNhZmVNb3ZlICh4LCB5KSB7XG4gICAgaWYoeCA+IHRoaXMubWF4WCgpKVxuICAgICAgdGhpcy5wb3MueCA9IHRoaXMubWF4WCgpXG4gICAgZWxzZSBpZiAoeCA8IDApXG4gICAgICB0aGlzLnBvcy54ID0gMFxuICAgIGVsc2VcbiAgICAgIHRoaXMucG9zLnggPSB4XG5cbiAgICBpZih5ID4gdGhpcy5tYXhZKCkpXG4gICAgICB0aGlzLnBvcy55ID0gdGhpcy5tYXhZKClcbiAgICBlbHNlIGlmICh5IDwgMClcbiAgICAgIHRoaXMucG9zLnkgPSAwXG4gICAgZWxzZVxuICAgICAgdGhpcy5wb3MueSA9IHlcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRW50aXR5TGlzdCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubGlzdCA9IHt9XG4gIH1cblxuICBwdXNoKGVudGl0eSkge1xuICAgIGlmKGVudGl0eSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICBmb3IobGV0IF9lbnRpdHkgb2YgZW50aXR5KSB7XG4gICAgICAgIHRoaXMucHVzaChfZW50aXR5KVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMubGlzdFtlbnRpdHkuaWRdID0gZW50aXR5XG4gICAgfVxuICB9XG5cbiAgZHJhdygpIHtcbiAgICBmb3IobGV0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmxpc3QpKSB7XG4gICAgICB0aGlzLmxpc3Rba2V5XS5kcmF3KClcbiAgICB9XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgZm9yKGxldCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5saXN0KSkge1xuICAgICAgaWYgKHRoaXMubGlzdFtrZXldID09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubGlzdFtrZXldLnVwZGF0ZSAhPSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMubGlzdFtrZXldLnVwZGF0ZSgpXG4gICAgfVxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5saXN0ID0ge31cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQU1BO0FBdENBO0FBQ0E7QUF3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbENBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/entity.js\n");

/***/ }),

/***/ "./src/events.js":
/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: init, mouse, keysDown, controlKeysDown */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return init; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mouse\", function() { return mouse; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"keysDown\", function() { return keysDown; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"controlKeysDown\", function() { return controlKeysDown; });\nlet mouse = {\n  x: 0,\n  y: 0,\n  clicked: false,\n  down: false,\n  rightClicked: false,\n  rightDown: false,\n  dragging: false,\n  dragStart: null\n};\n\nlet keysDown = {};\nlet controlKeysDown = {};\n\nlet init = canvas => {\n  $(canvas).on('mousemove', e => {\n    mouse.x = e.offsetX;\n    mouse.y = e.offsetY;\n    mouse.clicked = e.which == 1 && !mouse.down;\n    mouse.down = e.which == 1;\n    mouse.rightClicked = e.which == 3 && !mouse.rightDown;\n    mouse.rightDown = e.which == 3;\n    if (e.which == 1 && mouse.down && !mouse.clicked && mouse.dragging == false) {\n      mouse.dragging = true;\n      mouse.dragStart = { x: mouse.x, y: mouse.y };\n    }\n  });\n\n  $(canvas).on('mousedown', e => {\n    if (e.which == 1) {\n      mouse.clicked = !mouse.down;\n      mouse.down = true;\n    } else if (e.which == 3) {\n      mouse.rightClicked = !mouse.rightDown;\n      mouse.rightDown = true;\n    }\n  });\n\n  $(canvas).on('mouseup', e => {\n    if (e.which == 1) {\n      mouse.down = false;\n      mouse.clicked = false;\n      if (mouse.dragging) {\n        mouse.dragging = false;\n        mouse.dragStart = null;\n        $(canvas).css({ 'cursor': 'default' });\n      }\n    } else if (e.which == 3) {\n      mouse.rightDown = false;\n      mouse.rightClicked = false;\n    }\n  });\n\n  $(canvas).on('contextmenu', e => {\n    return false;\n  });\n\n  $(canvas).on('mouseleave', e => {\n    mouse.dragging = false;\n    mouse.dragStart = null;\n  });\n\n  $(document).on('keydown', e => {\n    if (!$.isEmptyObject(controlKeysDown)) {\n      controlKeysDown[e.keyCode] = true;\n      if (e.keyCode == 82) {\n        if (e.preventDefault) e.preventDefault();else return false;\n      }\n    } else keysDown[e.keyCode] = true;\n\n    if (e.keyCode == 17) {\n      controlKeysDown = keysDown;\n      keysDown = {};\n    }\n  });\n\n  $(document).on('keyup', e => {\n    if (!$.isEmptyObject(controlKeysDown)) {\n      delete controlKeysDown[e.keyCode];\n      if (e.keyCode == 17) {\n        keysDown = controlKeysDown;\n        controlKeysDown = {};\n      }\n    } else {\n      delete keysDown[e.keyCode];\n    }\n  });\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXZlbnRzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMuanM/NDJlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgbW91c2UgPSB7XG4gIHg6IDAsXG4gIHk6IDAsXG4gIGNsaWNrZWQ6IGZhbHNlLFxuICBkb3duOiBmYWxzZSxcbiAgcmlnaHRDbGlja2VkOiBmYWxzZSxcbiAgcmlnaHREb3duOiBmYWxzZSxcbiAgZHJhZ2dpbmc6IGZhbHNlLFxuICBkcmFnU3RhcnQ6IG51bGxcbn1cblxubGV0IGtleXNEb3duID0ge31cbmxldCBjb250cm9sS2V5c0Rvd24gPSB7fVxuXG5sZXQgaW5pdCA9IChjYW52YXMpID0+IHtcbiAgJChjYW52YXMpLm9uKCdtb3VzZW1vdmUnLCAoZSkgPT4ge1xuICAgIG1vdXNlLnggPSBlLm9mZnNldFhcbiAgICBtb3VzZS55ID0gZS5vZmZzZXRZXG4gICAgbW91c2UuY2xpY2tlZCA9IChlLndoaWNoID09IDEgJiYgIW1vdXNlLmRvd24pXG4gICAgbW91c2UuZG93biA9IChlLndoaWNoID09IDEpXG4gICAgbW91c2UucmlnaHRDbGlja2VkID0gKGUud2hpY2ggPT0gMyAmJiAhbW91c2UucmlnaHREb3duKVxuICAgIG1vdXNlLnJpZ2h0RG93biA9IChlLndoaWNoID09IDMpXG4gICAgaWYoZS53aGljaCA9PSAxICYmIG1vdXNlLmRvd24gJiYgIW1vdXNlLmNsaWNrZWQgJiYgbW91c2UuZHJhZ2dpbmcgPT0gZmFsc2UpIHtcbiAgICAgIG1vdXNlLmRyYWdnaW5nID0gdHJ1ZVxuICAgICAgbW91c2UuZHJhZ1N0YXJ0ID0geyB4OiBtb3VzZS54LCB5OiBtb3VzZS55IH1cbiAgICB9XG4gIH0pO1xuXG4gICQoY2FudmFzKS5vbignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICBpZiAoZS53aGljaCA9PSAxKSB7XG4gICAgICBtb3VzZS5jbGlja2VkID0gIW1vdXNlLmRvd25cbiAgICAgIG1vdXNlLmRvd24gPSB0cnVlXG4gICAgfVxuICAgIGVsc2UgaWYgKGUud2hpY2ggPT0gMykge1xuICAgICAgbW91c2UucmlnaHRDbGlja2VkID0gIW1vdXNlLnJpZ2h0RG93blxuICAgICAgbW91c2UucmlnaHREb3duID0gdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgJChjYW52YXMpLm9uKCdtb3VzZXVwJywgKGUpID0+IHtcbiAgICBpZiAoZS53aGljaCA9PSAxKSB7XG4gICAgICBtb3VzZS5kb3duID0gZmFsc2VcbiAgICAgIG1vdXNlLmNsaWNrZWQgPSBmYWxzZVxuICAgICAgaWYgKG1vdXNlLmRyYWdnaW5nKSB7XG4gICAgICAgIG1vdXNlLmRyYWdnaW5nID0gZmFsc2VcbiAgICAgICAgbW91c2UuZHJhZ1N0YXJ0ID0gbnVsbFxuICAgICAgICAkKGNhbnZhcykuY3NzKHsnY3Vyc29yJyA6ICdkZWZhdWx0J30pXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGUud2hpY2ggPT0gMykge1xuICAgICAgbW91c2UucmlnaHREb3duID0gZmFsc2VcbiAgICAgIG1vdXNlLnJpZ2h0Q2xpY2tlZCA9IGZhbHNlXG4gICAgfVxuICB9KTtcblxuICAkKGNhbnZhcykub24oJ2NvbnRleHRtZW51JywgKGUpID0+IHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfSk7XG5cbiAgJChjYW52YXMpLm9uKCdtb3VzZWxlYXZlJywgKGUpID0+IHtcbiAgICBtb3VzZS5kcmFnZ2luZyA9IGZhbHNlXG4gICAgbW91c2UuZHJhZ1N0YXJ0ID0gIG51bGxcbiAgfSk7XG5cbiAgJChkb2N1bWVudCkub24oJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgIGlmKCEkLmlzRW1wdHlPYmplY3QoY29udHJvbEtleXNEb3duKSkge1xuICAgICAgY29udHJvbEtleXNEb3duW2Uua2V5Q29kZV0gPSB0cnVlXG4gICAgICBpZihlLmtleUNvZGUgPT0gODIpIHtcbiAgICAgICAgaWYoZS5wcmV2ZW50RGVmYXVsdClcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlXG4gICAgICBrZXlzRG93bltlLmtleUNvZGVdID0gdHJ1ZVxuXG4gICAgaWYoZS5rZXlDb2RlID09IDE3KSB7XG4gICAgICBjb250cm9sS2V5c0Rvd24gPSBrZXlzRG93blxuICAgICAga2V5c0Rvd24gPSB7fVxuICAgIH1cbiAgfSk7XG5cbiAgJChkb2N1bWVudCkub24oJ2tleXVwJywgKGUpID0+IHtcbiAgICBpZighJC5pc0VtcHR5T2JqZWN0KGNvbnRyb2xLZXlzRG93bikpIHtcbiAgICAgIGRlbGV0ZSBjb250cm9sS2V5c0Rvd25bZS5rZXlDb2RlXVxuICAgICAgaWYoZS5rZXlDb2RlID09IDE3KSB7XG4gICAgICAgIGtleXNEb3duID0gY29udHJvbEtleXNEb3duXG4gICAgICAgIGNvbnRyb2xLZXlzRG93biA9IHt9XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGVsZXRlIGtleXNEb3duW2Uua2V5Q29kZV1cbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgeyBpbml0LCBtb3VzZSwga2V5c0Rvd24sIGNvbnRyb2xLZXlzRG93biB9XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/events.js\n");

/***/ }),

/***/ "./src/game.js":
/*!*********************!*\
  !*** ./src/game.js ***!
  \*********************/
/*! exports provided: AssetManager, setState, state, sprites, uiElements, environmentElements, canvas, ctx, events, update, draw, init */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setState\", function() { return setState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"state\", function() { return state; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sprites\", function() { return sprites; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uiElements\", function() { return uiElements; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"environmentElements\", function() { return environmentElements; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"canvas\", function() { return canvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ctx\", function() { return ctx; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"events\", function() { return events; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"update\", function() { return update; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"draw\", function() { return draw; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return init; });\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./entity */ \"./src/entity.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./events */ \"./src/events.js\");\n/* harmony import */ var _asset_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./asset_manager */ \"./src/asset_manager.js\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"AssetManager\", function() { return _asset_manager__WEBPACK_IMPORTED_MODULE_2__; });\n/* harmony import */ var _main_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./main_menu */ \"./src/main_menu.js\");\n/* harmony import */ var _map_editor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./map_editor */ \"./src/map_editor.js\");\n\n\n\n\n\n\nconst States = ['loading', 'ready', 'paused', 'menu'];\n\nlet canvas = undefined;\nlet ctx = undefined;\nlet events = _events__WEBPACK_IMPORTED_MODULE_1__;\nlet state = 'begin';\nlet previousState;\nlet sprites = new _entity__WEBPACK_IMPORTED_MODULE_0__[\"EntityList\"]();\nlet uiElements = new _entity__WEBPACK_IMPORTED_MODULE_0__[\"EntityList\"]();\nlet environmentElements = new _entity__WEBPACK_IMPORTED_MODULE_0__[\"EntityList\"]();\n\nlet update = () => {\n  switch (state) {\n    case 'begin':\n      state = 'idle';\n      _asset_manager__WEBPACK_IMPORTED_MODULE_2__[\"loadAssets\"](() => {\n        state = \"load_main_menu\";\n        console.log(\"Loaded assets\");\n        uiElements.clear();\n      });\n      break;\n    case 'load_main_menu':\n      state = 'main_menu';\n      _main_menu__WEBPACK_IMPORTED_MODULE_3__[\"init\"]();\n      break;\n    case 'main_menu':\n      uiElements.update();\n      break;\n    case 'load_map_editor':\n      state = 'map_editor';\n      _map_editor__WEBPACK_IMPORTED_MODULE_4__[\"init\"]();\n      break;\n    case 'map_editor':\n      _map_editor__WEBPACK_IMPORTED_MODULE_4__[\"update\"]();\n      sprites.update();\n      uiElements.update();\n      environmentElements.update();\n      break;\n    case 'pause':\n      uiElements.update();\n      break;\n    default:\n    //console.log(\"No state matches in update loop\")\n  }\n};\n\nlet draw = () => {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  sprites.draw();\n  environmentElements.draw();\n  uiElements.draw();\n};\n\nlet setState = _state => {\n  previousState = state;\n  state = _state;\n};\n\nlet init = () => {\n  canvas = document.getElementById(\"map_editor\");\n  canvas.pos = { x: 0, y: 0 };\n  ctx = canvas.getContext(\"2d\");\n  events.init(canvas);\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvZ2FtZS5qcz9iNjg5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVudGl0eSwgRW50aXR5TGlzdCB9IGZyb20gJy4vZW50aXR5J1xuaW1wb3J0ICogYXMgRXZlbnRzIGZyb20gJy4vZXZlbnRzJ1xuaW1wb3J0ICogYXMgQXNzZXRNYW5hZ2VyIGZyb20gJy4vYXNzZXRfbWFuYWdlcidcbmltcG9ydCAqIGFzIE1haW5NZW51IGZyb20gJy4vbWFpbl9tZW51J1xuaW1wb3J0ICogYXMgTWFwRWRpdG9yIGZyb20gJy4vbWFwX2VkaXRvcidcblxuY29uc3QgU3RhdGVzID0gWydsb2FkaW5nJywgJ3JlYWR5JywgJ3BhdXNlZCcsICdtZW51J11cblxuXG5sZXQgY2FudmFzID0gdW5kZWZpbmVkXG5sZXQgY3R4ID0gdW5kZWZpbmVkXG5sZXQgZXZlbnRzID0gRXZlbnRzXG5sZXQgc3RhdGUgPSAnYmVnaW4nXG5sZXQgcHJldmlvdXNTdGF0ZVxubGV0IHNwcml0ZXMgPSBuZXcgRW50aXR5TGlzdCgpXG5sZXQgdWlFbGVtZW50cyA9IG5ldyBFbnRpdHlMaXN0KClcbmxldCBlbnZpcm9ubWVudEVsZW1lbnRzID0gbmV3IEVudGl0eUxpc3QoKVxuXG5sZXQgdXBkYXRlID0gKCkgPT4ge1xuICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgY2FzZSAnYmVnaW4nOlxuICAgICAgc3RhdGUgPSAnaWRsZSdcbiAgICAgIEFzc2V0TWFuYWdlci5sb2FkQXNzZXRzKCgpID0+IHtcbiAgICAgICAgc3RhdGUgPSBcImxvYWRfbWFpbl9tZW51XCI7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTG9hZGVkIGFzc2V0c1wiKTtcbiAgICAgICAgdWlFbGVtZW50cy5jbGVhcigpXG4gICAgICB9KVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdsb2FkX21haW5fbWVudSc6XG4gICAgICBzdGF0ZSA9ICdtYWluX21lbnUnXG4gICAgICBNYWluTWVudS5pbml0KClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnbWFpbl9tZW51JzpcbiAgICAgIHVpRWxlbWVudHMudXBkYXRlKClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnbG9hZF9tYXBfZWRpdG9yJzpcbiAgICAgIHN0YXRlID0gJ21hcF9lZGl0b3InXG4gICAgICBNYXBFZGl0b3IuaW5pdCgpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ21hcF9lZGl0b3InOlxuICAgICAgTWFwRWRpdG9yLnVwZGF0ZSgpXG4gICAgICBzcHJpdGVzLnVwZGF0ZSgpXG4gICAgICB1aUVsZW1lbnRzLnVwZGF0ZSgpXG4gICAgICBlbnZpcm9ubWVudEVsZW1lbnRzLnVwZGF0ZSgpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgIHVpRWxlbWVudHMudXBkYXRlKClcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIC8vY29uc29sZS5sb2coXCJObyBzdGF0ZSBtYXRjaGVzIGluIHVwZGF0ZSBsb29wXCIpXG4gIH1cbn1cblxubGV0IGRyYXcgPSAoKSA9PiB7XG4gIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxuICBzcHJpdGVzLmRyYXcoKVxuICBlbnZpcm9ubWVudEVsZW1lbnRzLmRyYXcoKVxuICB1aUVsZW1lbnRzLmRyYXcoKVxufVxuXG5sZXQgc2V0U3RhdGUgPSAoX3N0YXRlKSA9PiB7XG4gIHByZXZpb3VzU3RhdGUgPSBzdGF0ZVxuICBzdGF0ZSA9IF9zdGF0ZVxufVxuXG5sZXQgaW5pdCA9ICgpID0+IHtcbiAgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBfZWRpdG9yXCIpXG4gIGNhbnZhcy5wb3MgPSB7IHg6IDAsIHk6IDAgfVxuICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXG4gIGV2ZW50cy5pbml0KGNhbnZhcylcbn1cblxuZXhwb3J0IHtcbiAgQXNzZXRNYW5hZ2VyLFxuICBzZXRTdGF0ZSxcbiAgc3RhdGUsXG4gIHNwcml0ZXMsXG4gIHVpRWxlbWVudHMsXG4gIGVudmlyb25tZW50RWxlbWVudHMsXG4gIGNhbnZhcyxcbiAgY3R4LFxuICBldmVudHMsXG4gIHVwZGF0ZSxcbiAgZHJhdyxcbiAgaW5pdFxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlCQTtBQWdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/game.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game */ \"./src/game.js\");\n\n\nwindow.Game = _game__WEBPACK_IMPORTED_MODULE_0__;\n\nconst FPS = 60;\n\nconst AnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || null;\n\n$(document).ready(() => {\n  Game.init();\n\n  if (AnimationFrame) {\n    let updateLoop = () => {\n      Game.update();\n      AnimationFrame(updateLoop);\n    };\n    let drawLoop = () => {\n      Game.draw();\n      AnimationFrame(drawLoop);\n    };\n\n    updateLoop();\n    drawLoop();\n  } else {\n    setInterval(Game.update, 1000 / FPS);\n    setInterval(Game.draw, 1000 / FPS);\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2luZGV4LmpzPzEyZDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZ2FtZSBmcm9tICcuL2dhbWUnXG5cbndpbmRvdy5HYW1lID0gZ2FtZVxuXG5jb25zdCBGUFMgPSA2MFxuXG5jb25zdCBBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgbnVsbDtcblxuJChkb2N1bWVudCkucmVhZHkoICgpID0+IHtcbiAgR2FtZS5pbml0KClcblxuICBpZihBbmltYXRpb25GcmFtZSkge1xuICAgIGxldCB1cGRhdGVMb29wID0gKCkgPT4ge1xuICAgICAgR2FtZS51cGRhdGUoKVxuICAgICAgQW5pbWF0aW9uRnJhbWUodXBkYXRlTG9vcClcbiAgICB9XG4gICAgbGV0IGRyYXdMb29wID0gKCkgPT4ge1xuICAgICAgR2FtZS5kcmF3KClcbiAgICAgIEFuaW1hdGlvbkZyYW1lKGRyYXdMb29wKVxuICAgIH1cblxuICAgIHVwZGF0ZUxvb3AoKVxuICAgIGRyYXdMb29wKClcbiAgfVxuICBlbHNlIHtcbiAgICBzZXRJbnRlcnZhbChHYW1lLnVwZGF0ZSwgMTAwMC9GUFMpXG4gICAgc2V0SW50ZXJ2YWwoR2FtZS5kcmF3LCAxMDAwL0ZQUylcbiAgfVxufSlcblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/main_menu.js":
/*!**************************!*\
  !*** ./src/main_menu.js ***!
  \**************************/
/*! exports provided: buttons, init, draw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"buttons\", function() { return buttons; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return init; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"draw\", function() { return draw; });\n/* harmony import */ var _ui_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui/ui */ \"./src/ui/ui.js\");\n\n\nlet buttons = [];\nlet canvas = undefined;\nlet ctx = undefined;\n\nlet draw = () => {\n  for (let button of buttons) {\n    buttons.draw();\n  }\n};\n\nlet init = () => {\n  canvas = Game.canvas;\n  ctx = Game.ctx;\n\n  let loadMapEditor = () => {\n    Game.uiElements.clear();\n    Game.setState('load_map_editor');\n  };\n\n  let loadSettings = () => {\n    console.log(\"Stubbing settings load action\");\n  };\n\n  let buttonGrid = new _ui_ui__WEBPACK_IMPORTED_MODULE_0__[\"UI\"].Grid(canvas, {\n    width: \"20%\",\n    height: \"50%\",\n    rowHeight: 30,\n    margin: 30,\n    rowMargin: 10,\n    verticalAlignment: \"bottom\",\n    rows: [[{\n      className: _ui_ui__WEBPACK_IMPORTED_MODULE_0__[\"UI\"].Button,\n      properties: { text: \"Map Editor\", event_object: Game.events, clickAction: loadMapEditor }\n    }], [{\n      className: _ui_ui__WEBPACK_IMPORTED_MODULE_0__[\"UI\"].Button,\n      properties: { text: \"Settings\", event_object: Game.events, clickAction: loadSettings }\n    }]]\n  });\n\n  Game.sprites.clear();\n  Game.environmentElements.clear();\n  Game.uiElements.clear();\n\n  Game.uiElements.push(buttonGrid);\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbl9tZW51LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9tYWluX21lbnUuanM/ZWVlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVSSB9IGZyb20gJy4vdWkvdWknXG5cbmxldCBidXR0b25zID0gW11cbmxldCBjYW52YXMgPSB1bmRlZmluZWRcbmxldCBjdHggPSB1bmRlZmluZWRcblxubGV0IGRyYXcgPSAoKSA9PiB7XG4gIGZvciAobGV0IGJ1dHRvbiBvZiBidXR0b25zKSB7XG4gICAgYnV0dG9ucy5kcmF3KClcbiAgfVxufVxuXG5sZXQgaW5pdCA9ICgpID0+IHtcbiAgY2FudmFzID0gR2FtZS5jYW52YXNcbiAgY3R4ID0gR2FtZS5jdHhcblxuICBsZXQgbG9hZE1hcEVkaXRvciA9ICgpID0+IHtcbiAgICBHYW1lLnVpRWxlbWVudHMuY2xlYXIoKVxuICAgIEdhbWUuc2V0U3RhdGUoJ2xvYWRfbWFwX2VkaXRvcicpXG4gIH1cblxuICBsZXQgbG9hZFNldHRpbmdzID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiU3R1YmJpbmcgc2V0dGluZ3MgbG9hZCBhY3Rpb25cIilcbiAgfVxuXG4gIGxldCBidXR0b25HcmlkID0gbmV3IFVJLkdyaWQoY2FudmFzLCB7XG4gICAgd2lkdGg6IFwiMjAlXCIsXG4gICAgaGVpZ2h0OiBcIjUwJVwiLFxuICAgIHJvd0hlaWdodDogMzAsXG4gICAgbWFyZ2luOiAzMCxcbiAgICByb3dNYXJnaW46IDEwLFxuICAgIHZlcnRpY2FsQWxpZ25tZW50OiBcImJvdHRvbVwiLFxuICAgIHJvd3M6IFtcbiAgICAgIFtcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogVUkuQnV0dG9uLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHt0ZXh0OiBcIk1hcCBFZGl0b3JcIiwgZXZlbnRfb2JqZWN0OiBHYW1lLmV2ZW50cywgY2xpY2tBY3Rpb246IGxvYWRNYXBFZGl0b3J9XG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFVJLkJ1dHRvbixcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7dGV4dDogXCJTZXR0aW5nc1wiLCBldmVudF9vYmplY3Q6IEdhbWUuZXZlbnRzLCBjbGlja0FjdGlvbjogbG9hZFNldHRpbmdzfVxuICAgICAgICB9XG4gICAgICBdXG4gICAgXVxuICB9KVxuXG4gIEdhbWUuc3ByaXRlcy5jbGVhcigpXG4gIEdhbWUuZW52aXJvbm1lbnRFbGVtZW50cy5jbGVhcigpXG4gIEdhbWUudWlFbGVtZW50cy5jbGVhcigpXG5cbiAgR2FtZS51aUVsZW1lbnRzLnB1c2goYnV0dG9uR3JpZClcbn1cblxuXG5leHBvcnQgeyBidXR0b25zLCBpbml0LCBkcmF3IH1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFGQTtBQU9BO0FBQ0E7QUFGQTtBQWZBO0FBQ0E7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main_menu.js\n");

/***/ }),

/***/ "./src/map.js":
/*!********************!*\
  !*** ./src/map.js ***!
  \********************/
/*! exports provided: Map, Texture */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Map\", function() { return Map; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Texture\", function() { return Texture; });\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./entity */ \"./src/entity.js\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collision */ \"./src/collision.js\");\n\n\n\nclass Command {\n  constructor(list, previous, next, command, params) {\n    Command.id = Command.id === undefined ? 1 : Command.id;\n    this.id = Command.id++;\n    this.list = list;\n    this.command = command;\n    this.params = params;\n    this.previous = previous;\n    this.next = next;\n  }\n\n  merge(params) {\n    this.params = this.params.concat(params);\n  }\n\n  reverseCommand() {\n    switch (this.command) {\n      case 'addTile':\n        this.list.map.viewPort.moveToObject(this.params[0].pos);\n        setTimeout(function () {\n          for (let texture of this.params) {\n            this.list.map.removeTileFromHistory(texture);\n          }\n        }.bind(this), 100);\n        break;\n      case 'eraseTile':\n        this.list.map.viewPort.moveToObject(this.params[0].pos);\n        setTimeout(function () {\n          for (let texture of this.params) {\n            this.list.map.addTileFromHistory(texture);\n          }\n        }.bind(this), 100);\n        break;\n      default:\n        console.error(`Trying to undo unknown command: ${this.command}`);\n    }\n  }\n\n  applyCommand() {\n    switch (this.command) {\n      case 'addTile':\n        this.list.map.viewPort.moveToObject(this.params[0].pos);\n        setTimeout(function () {\n          for (let texture of this.params) {\n            this.list.map.addTileFromHistory(texture);\n          }\n        }.bind(this), 100);\n        break;\n      case 'eraseTile':\n        this.list.map.viewPort.moveToObject(this.params[0].pos);\n        setTimeout(function () {\n          for (let texture of this.params) {\n            this.list.map.removeTileFromHistory(texture);\n          }\n        }.bind(this), 100);\n        break;\n      default:\n        console.error(`Trying to redo unknown command: ${this.command}`);\n    }\n  }\n}\n\nclass CommandHistory {\n  constructor(map) {\n    this.map = map;\n    this.head = null;\n    this.tail = null;\n    this.current = null;\n    this.length = 0;\n  }\n\n  print() {\n    let current = this.head;\n    let str = '';\n    while (current) {\n      if (current.id == this.head.id) str += \"HEAD\";else if (this.current && current.id == this.current.id) str += \"CURRENT\";else if (current.id == this.tail.id) str += \"TAIL\";else str += current.id;\n\n      str += \"-\" + current.params.length;\n\n      if (current.next) str += \" --> \";\n      current = current.next;\n    }\n    console.log(str);\n  }\n\n  push(commandString, params) {\n    let command = new Command(this, this.current, null, commandString, params);\n\n    if (!this.head) this.head = command;\n\n    if (this.current) {\n      this.current.next = command;\n    }\n\n    this.current = command;\n    this.tail = this.current;\n\n    if (this.length > 40) this.head = this.head.next;else this.length++;\n  }\n\n  merge(params) {\n    if (this.current) {\n      this.current.merge(params);\n    }\n  }\n\n  undo() {\n    if (this.current) {\n      this.current.reverseCommand();\n      this.current = this.current.previous;\n      this.length--;\n    }\n  }\n\n  redo() {\n    if (this.current) {\n      if (this.current.next) {\n        this.current = this.current.next;\n        this.current.applyCommand();\n        this.length++;\n      }\n    } else if (this.head) {\n      this.current = this.head;\n      this.current.applyCommand();\n      this.length = 1;\n    }\n  }\n}\n\nclass Map {\n  constructor(width, height, textureSize) {\n    this.id = \"map\";\n    this.width = Math.trunc(width / textureSize) * textureSize;\n    this.height = Math.trunc(height / textureSize) * textureSize;\n    this.textureSize = textureSize;\n    this.columns = this.width / textureSize;\n    this.rows = this.height / textureSize;\n    this.viewPort = null;\n\n    this.map = [];\n    this.layout = [];\n\n    for (let column = 0; column < this.columns; column++) {\n      this.map[column] = [];\n      this.layout[column] = [];\n    }\n    this.commandHistory = new CommandHistory(this);\n  }\n\n  save() {\n    this.serialize();\n\n    $.ajax({\n      method: \"POST\",\n      url: '/maps',\n      data: { layout: JSON.stringify(this.layout) },\n      error: error => {\n        console.log(`ERROR: response text: ${error.responseText}, status: ${error.status}`);\n      },\n      success: data => {\n        console.log(\"SUCCESSFULLY SAVED MAP\");\n      }\n    });\n  }\n\n  serialize() {\n    for (let column = 0; column < this.columns; column++) {\n      for (let row = 0; row < this.rows; row++) {\n        let square = this.map[column][row];\n        if (square) this.layout[column][row] = square.key;else this.layout[column][row] = null;\n      }\n    }\n  }\n\n  calculateAbsolutePosition(pos) {\n    if (this.viewPort) {\n      let sideMenuWidth = Game.canvas.width - this.viewPort.width;\n      var x = this.viewPort.pos.x + (pos.x - sideMenuWidth);\n      var y = this.viewPort.pos.y + pos.y;\n    } else {\n      var x = pos.x;\n      var y = pos.y;\n    }\n    return [x, y];\n  }\n\n  xyToColRow(pos) {\n    let column = Math.trunc(pos.x / this.textureSize);\n    let row = Math.trunc(pos.y / this.textureSize);\n    return [column, row];\n  }\n\n  addTile(_texture, addToLastCommand) {\n    let [x, y] = this.calculateAbsolutePosition(_texture.pos);\n    let [column, row] = this.xyToColRow({ x, y });\n\n    let texture = new Texture(x, y, _texture.key, _texture.img);\n\n    this.map[column][row] = texture;\n    if (addToLastCommand && this.commandHistory.current.command == 'addTile') {\n      this.commandHistory.merge([texture]);\n    } else {\n      this.commandHistory.push(\"addTile\", [texture]);\n    }\n  }\n\n  addTileFromHistory(texture) {\n    let [column, row] = this.xyToColRow({ x: texture.pos.x, y: texture.pos.y });\n    this.map[column][row] = texture;\n  }\n\n  removeTile(relativePos, addToLastCommand) {\n    let [x, y] = this.calculateAbsolutePosition(relativePos);\n    let [column, row] = this.xyToColRow({ x, y });\n\n    let texture = this.map[column][row];\n    if (texture === undefined) return false;\n    this.map[column][row] = undefined;\n    if (addToLastCommand && this.commandHistory.current.command == 'eraseTile') {\n      this.commandHistory.merge([texture]);\n    } else {\n      this.commandHistory.push(\"eraseTile\", [texture]);\n    }\n    return true;\n  }\n\n  removeTileFromHistory(texture) {\n    let column = Math.trunc(texture.pos.x / texture.width);\n    let row = Math.trunc(texture.pos.y / texture.height);\n    this.map[column][row] = undefined;\n  }\n\n  draw() {\n    if (this.viewPort) {\n      var startColumn = Math.trunc(this.viewPort.pos.x / this.textureSize);\n      var endColumn = startColumn + Math.trunc(this.viewPort.width / this.textureSize);\n      var startRow = Math.trunc(this.viewPort.pos.y / this.textureSize);\n      var endRow = startRow + Math.trunc(this.viewPort.height / this.textureSize);\n    } else {\n      var startColumn = 0;\n      var endColumn = startColumn + Math.trunc(Game.canvas.width / this.textureSize);\n      var startRow = 0;\n      var endRow = startRow + Math.trunc(Game.canvas.height / this.textureSize);\n    }\n\n    for (let column = startColumn; column <= endColumn; column++) {\n      for (let row = startRow; row <= endRow; row++) {\n        if (!this.map[column] || !this.map[column][row]) continue;\n\n        let texture = this.map[column][row];\n\n        if (texture === undefined) continue;\n\n        let absolutePosition = { x: column * this.textureSize, y: row * this.textureSize };\n        let pos = _collision__WEBPACK_IMPORTED_MODULE_1__[\"vectorDifference\"](absolutePosition, this.viewPort.pos);\n        let relativePosition = _collision__WEBPACK_IMPORTED_MODULE_1__[\"vectorSum\"](pos, { x: Game.canvas.width - this.viewPort.width, y: 0 });\n\n        Game.ctx.drawImage(texture.img, relativePosition.x, relativePosition.y, texture.width, texture.height);\n      }\n    }\n  }\n}\n\nclass Texture extends _entity__WEBPACK_IMPORTED_MODULE_0__[\"Entity\"] {\n  constructor(x, y, key, img) {\n    super(x, y, img.width, img.height);\n    this.name = \"Texture\";\n    this.key = key;\n    this.img = img;\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFwLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9tYXAuanM/NTE3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0VudGl0eX0gZnJvbSAnLi9lbnRpdHknXG5pbXBvcnQgKiBhcyBDb2xsaXNpb24gZnJvbSAnLi9jb2xsaXNpb24nXG5cbmNsYXNzIENvbW1hbmQge1xuICBjb25zdHJ1Y3RvcihsaXN0LCBwcmV2aW91cywgbmV4dCwgY29tbWFuZCwgcGFyYW1zKSB7XG4gICAgQ29tbWFuZC5pZCA9IChDb21tYW5kLmlkID09PSB1bmRlZmluZWQpID8gMSA6IENvbW1hbmQuaWRcbiAgICB0aGlzLmlkID0gQ29tbWFuZC5pZCsrXG4gICAgdGhpcy5saXN0ID0gbGlzdFxuICAgIHRoaXMuY29tbWFuZCA9IGNvbW1hbmRcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtc1xuICAgIHRoaXMucHJldmlvdXMgPSBwcmV2aW91c1xuICAgIHRoaXMubmV4dCA9IG5leHRcbiAgfVxuXG4gIG1lcmdlKHBhcmFtcykge1xuICAgIHRoaXMucGFyYW1zID0gdGhpcy5wYXJhbXMuY29uY2F0KHBhcmFtcylcbiAgfVxuXG4gIHJldmVyc2VDb21tYW5kKCkge1xuICAgIHN3aXRjaCAodGhpcy5jb21tYW5kKSB7XG4gICAgICBjYXNlICdhZGRUaWxlJzpcbiAgICAgICAgdGhpcy5saXN0Lm1hcC52aWV3UG9ydC5tb3ZlVG9PYmplY3QodGhpcy5wYXJhbXNbMF0ucG9zKVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGZvcihsZXQgdGV4dHVyZSBvZiB0aGlzLnBhcmFtcykge1xuICAgICAgICAgICAgdGhpcy5saXN0Lm1hcC5yZW1vdmVUaWxlRnJvbUhpc3RvcnkodGV4dHVyZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMTAwKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZXJhc2VUaWxlJzpcbiAgICAgICAgdGhpcy5saXN0Lm1hcC52aWV3UG9ydC5tb3ZlVG9PYmplY3QodGhpcy5wYXJhbXNbMF0ucG9zKVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGZvcihsZXQgdGV4dHVyZSBvZiB0aGlzLnBhcmFtcykge1xuICAgICAgICAgICAgdGhpcy5saXN0Lm1hcC5hZGRUaWxlRnJvbUhpc3RvcnkodGV4dHVyZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMTAwKVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS5lcnJvcihgVHJ5aW5nIHRvIHVuZG8gdW5rbm93biBjb21tYW5kOiAke3RoaXMuY29tbWFuZH1gKVxuICAgIH1cbiAgfVxuXG4gIGFwcGx5Q29tbWFuZCgpIHtcbiAgICBzd2l0Y2godGhpcy5jb21tYW5kKSB7XG4gICAgICBjYXNlICdhZGRUaWxlJzpcbiAgICAgICAgdGhpcy5saXN0Lm1hcC52aWV3UG9ydC5tb3ZlVG9PYmplY3QodGhpcy5wYXJhbXNbMF0ucG9zKVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGZvcihsZXQgdGV4dHVyZSBvZiB0aGlzLnBhcmFtcykge1xuICAgICAgICAgICAgdGhpcy5saXN0Lm1hcC5hZGRUaWxlRnJvbUhpc3RvcnkodGV4dHVyZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMTAwKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZXJhc2VUaWxlJzpcbiAgICAgICAgdGhpcy5saXN0Lm1hcC52aWV3UG9ydC5tb3ZlVG9PYmplY3QodGhpcy5wYXJhbXNbMF0ucG9zKVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGZvcihsZXQgdGV4dHVyZSBvZiB0aGlzLnBhcmFtcykge1xuICAgICAgICAgICAgdGhpcy5saXN0Lm1hcC5yZW1vdmVUaWxlRnJvbUhpc3RvcnkodGV4dHVyZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMTAwKVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS5lcnJvcihgVHJ5aW5nIHRvIHJlZG8gdW5rbm93biBjb21tYW5kOiAke3RoaXMuY29tbWFuZH1gKVxuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBDb21tYW5kSGlzdG9yeSB7XG4gIGNvbnN0cnVjdG9yKG1hcCkge1xuICAgIHRoaXMubWFwID0gbWFwXG4gICAgdGhpcy5oZWFkID0gbnVsbFxuICAgIHRoaXMudGFpbCA9IG51bGxcbiAgICB0aGlzLmN1cnJlbnQgPSBudWxsXG4gICAgdGhpcy5sZW5ndGggPSAwXG4gIH1cblxuICBwcmludCgpIHtcbiAgICBsZXQgY3VycmVudCA9IHRoaXMuaGVhZFxuICAgIGxldCBzdHIgPSAnJ1xuICAgIHdoaWxlKGN1cnJlbnQpIHtcbiAgICAgIGlmIChjdXJyZW50LmlkID09IHRoaXMuaGVhZC5pZClcbiAgICAgICAgc3RyICs9IFwiSEVBRFwiXG4gICAgICBlbHNlIGlmICh0aGlzLmN1cnJlbnQgJiYgY3VycmVudC5pZCA9PSB0aGlzLmN1cnJlbnQuaWQpXG4gICAgICAgIHN0ciArPSBcIkNVUlJFTlRcIlxuICAgICAgZWxzZSBpZiAoY3VycmVudC5pZCA9PSB0aGlzLnRhaWwuaWQpXG4gICAgICAgIHN0ciArPSBcIlRBSUxcIlxuICAgICAgZWxzZVxuICAgICAgICBzdHIgKz0gY3VycmVudC5pZFxuXG4gICAgICBzdHIgKz0gXCItXCIgKyBjdXJyZW50LnBhcmFtcy5sZW5ndGhcblxuICAgICAgaWYoY3VycmVudC5uZXh0KVxuICAgICAgICBzdHIgKz0gXCIgLS0+IFwiXG4gICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0XG4gICAgfVxuICAgICAgY29uc29sZS5sb2coc3RyKVxuICB9XG5cbiAgcHVzaChjb21tYW5kU3RyaW5nLCBwYXJhbXMpIHtcbiAgICBsZXQgY29tbWFuZCA9IG5ldyBDb21tYW5kKHRoaXMsIHRoaXMuY3VycmVudCwgbnVsbCwgY29tbWFuZFN0cmluZywgcGFyYW1zKVxuXG4gICAgaWYoIXRoaXMuaGVhZClcbiAgICAgIHRoaXMuaGVhZCA9IGNvbW1hbmRcblxuICAgIGlmKHRoaXMuY3VycmVudCkge1xuICAgICAgdGhpcy5jdXJyZW50Lm5leHQgPSBjb21tYW5kXG4gICAgfVxuXG4gICAgdGhpcy5jdXJyZW50ID0gY29tbWFuZFxuICAgIHRoaXMudGFpbCA9IHRoaXMuY3VycmVudFxuXG4gICAgaWYodGhpcy5sZW5ndGggPiA0MClcbiAgICAgIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXh0XG4gICAgZWxzZVxuICAgICAgdGhpcy5sZW5ndGgrK1xuICB9XG5cbiAgbWVyZ2UocGFyYW1zKSB7XG4gICAgaWYodGhpcy5jdXJyZW50KSB7XG4gICAgICB0aGlzLmN1cnJlbnQubWVyZ2UocGFyYW1zKVxuICAgIH1cbiAgfVxuXG4gIHVuZG8oKSB7XG4gICAgaWYodGhpcy5jdXJyZW50KSB7XG4gICAgICB0aGlzLmN1cnJlbnQucmV2ZXJzZUNvbW1hbmQoKVxuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5jdXJyZW50LnByZXZpb3VzXG4gICAgICB0aGlzLmxlbmd0aC0tXG4gICAgfVxuICB9XG5cbiAgcmVkbygpIHtcbiAgICBpZih0aGlzLmN1cnJlbnQpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnQubmV4dCkge1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLmN1cnJlbnQubmV4dFxuICAgICAgICB0aGlzLmN1cnJlbnQuYXBwbHlDb21tYW5kKClcbiAgICAgICAgdGhpcy5sZW5ndGgrK1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmKHRoaXMuaGVhZCkge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5oZWFkXG4gICAgICB0aGlzLmN1cnJlbnQuYXBwbHlDb21tYW5kKClcbiAgICAgIHRoaXMubGVuZ3RoID0gMVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWFwIHtcbiAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCwgdGV4dHVyZVNpemUpIHtcbiAgICB0aGlzLmlkID0gXCJtYXBcIlxuICAgIHRoaXMud2lkdGggPSBNYXRoLnRydW5jKHdpZHRoIC8gdGV4dHVyZVNpemUpICogdGV4dHVyZVNpemVcbiAgICB0aGlzLmhlaWdodCA9IE1hdGgudHJ1bmMoaGVpZ2h0IC8gdGV4dHVyZVNpemUpICogdGV4dHVyZVNpemVcbiAgICB0aGlzLnRleHR1cmVTaXplID0gdGV4dHVyZVNpemVcbiAgICB0aGlzLmNvbHVtbnMgPSB0aGlzLndpZHRoIC8gdGV4dHVyZVNpemVcbiAgICB0aGlzLnJvd3MgPSB0aGlzLmhlaWdodCAvIHRleHR1cmVTaXplXG4gICAgdGhpcy52aWV3UG9ydCA9IG51bGxcblxuICAgIHRoaXMubWFwID0gW11cbiAgICB0aGlzLmxheW91dCA9IFtdXG5cbiAgICBmb3IobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IHRoaXMuY29sdW1uczsgY29sdW1uKyspIHtcbiAgICAgIHRoaXMubWFwW2NvbHVtbl0gPSBbXVxuICAgICAgdGhpcy5sYXlvdXRbY29sdW1uXSA9IFtdXG4gICAgfVxuICAgIHRoaXMuY29tbWFuZEhpc3RvcnkgPSBuZXcgQ29tbWFuZEhpc3RvcnkodGhpcylcbiAgfVxuXG4gIHNhdmUoKSB7XG4gICAgdGhpcy5zZXJpYWxpemUoKVxuXG4gICAgJC5hamF4KHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICB1cmw6ICcvbWFwcycsXG4gICAgICBkYXRhOiB7IGxheW91dDogSlNPTi5zdHJpbmdpZnkodGhpcy5sYXlvdXQpfSxcbiAgICAgIGVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYEVSUk9SOiByZXNwb25zZSB0ZXh0OiAke2Vycm9yLnJlc3BvbnNlVGV4dH0sIHN0YXR1czogJHtlcnJvci5zdGF0dXN9YClcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOiAoZGF0YSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlNVQ0NFU1NGVUxMWSBTQVZFRCBNQVBcIilcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHNlcmlhbGl6ZSgpIHtcbiAgICBmb3IobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IHRoaXMuY29sdW1uczsgY29sdW1uKyspIHtcbiAgICAgIGZvcihsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5yb3dzOyByb3crKykge1xuICAgICAgICBsZXQgc3F1YXJlID0gdGhpcy5tYXBbY29sdW1uXVtyb3ddXG4gICAgICAgIGlmKHNxdWFyZSlcbiAgICAgICAgICB0aGlzLmxheW91dFtjb2x1bW5dW3Jvd10gPSBzcXVhcmUua2V5XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aGlzLmxheW91dFtjb2x1bW5dW3Jvd10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2FsY3VsYXRlQWJzb2x1dGVQb3NpdGlvbihwb3MpIHtcbiAgICBpZih0aGlzLnZpZXdQb3J0KSB7XG4gICAgICBsZXQgc2lkZU1lbnVXaWR0aCA9IEdhbWUuY2FudmFzLndpZHRoIC0gdGhpcy52aWV3UG9ydC53aWR0aFxuICAgICAgdmFyIHggPSB0aGlzLnZpZXdQb3J0LnBvcy54ICsgKHBvcy54IC0gc2lkZU1lbnVXaWR0aClcbiAgICAgIHZhciB5ID0gdGhpcy52aWV3UG9ydC5wb3MueSArIHBvcy55XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmFyIHggPSBwb3MueFxuICAgICAgdmFyIHkgPSBwb3MueVxuICAgIH1cbiAgICByZXR1cm4gW3gsIHldXG4gIH1cblxuICB4eVRvQ29sUm93KHBvcykge1xuICAgIGxldCBjb2x1bW4gPSBNYXRoLnRydW5jKHBvcy54IC8gdGhpcy50ZXh0dXJlU2l6ZSlcbiAgICBsZXQgcm93ID0gTWF0aC50cnVuYyhwb3MueSAvIHRoaXMudGV4dHVyZVNpemUpXG4gICAgcmV0dXJuIFtjb2x1bW4sIHJvd11cbiAgfVxuXG4gIGFkZFRpbGUoX3RleHR1cmUsIGFkZFRvTGFzdENvbW1hbmQpIHtcbiAgICBsZXQgW3gsIHldID0gdGhpcy5jYWxjdWxhdGVBYnNvbHV0ZVBvc2l0aW9uKF90ZXh0dXJlLnBvcylcbiAgICBsZXQgW2NvbHVtbiwgcm93XSA9IHRoaXMueHlUb0NvbFJvdyh7eCwgeX0pXG5cbiAgICBsZXQgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKHgsIHksIF90ZXh0dXJlLmtleSwgX3RleHR1cmUuaW1nKVxuXG4gICAgdGhpcy5tYXBbY29sdW1uXVtyb3ddID0gdGV4dHVyZVxuICAgIGlmKGFkZFRvTGFzdENvbW1hbmQgJiYgdGhpcy5jb21tYW5kSGlzdG9yeS5jdXJyZW50LmNvbW1hbmQgPT0gJ2FkZFRpbGUnKSB7XG4gICAgICB0aGlzLmNvbW1hbmRIaXN0b3J5Lm1lcmdlKFt0ZXh0dXJlXSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmNvbW1hbmRIaXN0b3J5LnB1c2goXCJhZGRUaWxlXCIsIFt0ZXh0dXJlXSlcbiAgICB9XG4gIH1cblxuICBhZGRUaWxlRnJvbUhpc3RvcnkodGV4dHVyZSkge1xuICAgIGxldCBbY29sdW1uLCByb3ddID0gdGhpcy54eVRvQ29sUm93KHt4OiB0ZXh0dXJlLnBvcy54LCB5OiB0ZXh0dXJlLnBvcy55fSlcbiAgICB0aGlzLm1hcFtjb2x1bW5dW3Jvd10gPSB0ZXh0dXJlXG4gIH1cblxuICByZW1vdmVUaWxlKHJlbGF0aXZlUG9zLCBhZGRUb0xhc3RDb21tYW5kKSB7XG4gICAgbGV0IFt4LCB5XSA9IHRoaXMuY2FsY3VsYXRlQWJzb2x1dGVQb3NpdGlvbihyZWxhdGl2ZVBvcylcbiAgICBsZXQgW2NvbHVtbiwgcm93XSA9IHRoaXMueHlUb0NvbFJvdyh7eCwgeX0pXG5cbiAgICBsZXQgdGV4dHVyZSA9IHRoaXMubWFwW2NvbHVtbl1bcm93XVxuICAgIGlmKHRleHR1cmUgPT09IHVuZGVmaW5lZClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIHRoaXMubWFwW2NvbHVtbl1bcm93XSA9IHVuZGVmaW5lZFxuICAgIGlmKGFkZFRvTGFzdENvbW1hbmQgJiYgdGhpcy5jb21tYW5kSGlzdG9yeS5jdXJyZW50LmNvbW1hbmQgPT0gJ2VyYXNlVGlsZScpIHtcbiAgICAgIHRoaXMuY29tbWFuZEhpc3RvcnkubWVyZ2UoW3RleHR1cmVdKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuY29tbWFuZEhpc3RvcnkucHVzaChcImVyYXNlVGlsZVwiLCBbdGV4dHVyZV0pXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICByZW1vdmVUaWxlRnJvbUhpc3RvcnkodGV4dHVyZSkge1xuICAgIGxldCBjb2x1bW4gPSBNYXRoLnRydW5jKHRleHR1cmUucG9zLnggLyB0ZXh0dXJlLndpZHRoKVxuICAgIGxldCByb3cgPSBNYXRoLnRydW5jKHRleHR1cmUucG9zLnkgLyB0ZXh0dXJlLmhlaWdodClcbiAgICB0aGlzLm1hcFtjb2x1bW5dW3Jvd10gPSB1bmRlZmluZWRcbiAgfVxuXG4gIGRyYXcoKSB7XG4gICAgaWYodGhpcy52aWV3UG9ydCkge1xuICAgICAgdmFyIHN0YXJ0Q29sdW1uID0gTWF0aC50cnVuYyh0aGlzLnZpZXdQb3J0LnBvcy54IC8gdGhpcy50ZXh0dXJlU2l6ZSlcbiAgICAgIHZhciBlbmRDb2x1bW4gPSBzdGFydENvbHVtbiArIE1hdGgudHJ1bmModGhpcy52aWV3UG9ydC53aWR0aCAvIHRoaXMudGV4dHVyZVNpemUpXG4gICAgICB2YXIgc3RhcnRSb3cgPSBNYXRoLnRydW5jKHRoaXMudmlld1BvcnQucG9zLnkgLyB0aGlzLnRleHR1cmVTaXplKVxuICAgICAgdmFyIGVuZFJvdyA9IHN0YXJ0Um93ICsgTWF0aC50cnVuYyh0aGlzLnZpZXdQb3J0LmhlaWdodCAvIHRoaXMudGV4dHVyZVNpemUpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmFyIHN0YXJ0Q29sdW1uID0gMFxuICAgICAgdmFyIGVuZENvbHVtbiA9IHN0YXJ0Q29sdW1uICsgTWF0aC50cnVuYyhHYW1lLmNhbnZhcy53aWR0aCAvIHRoaXMudGV4dHVyZVNpemUpXG4gICAgICB2YXIgc3RhcnRSb3cgPSAwXG4gICAgICB2YXIgZW5kUm93ID0gc3RhcnRSb3cgKyBNYXRoLnRydW5jKEdhbWUuY2FudmFzLmhlaWdodCAvIHRoaXMudGV4dHVyZVNpemUpXG4gICAgfVxuXG4gICAgZm9yKGxldCBjb2x1bW4gPSBzdGFydENvbHVtbjsgY29sdW1uIDw9IGVuZENvbHVtbjsgY29sdW1uKyspIHtcbiAgICAgIGZvcihsZXQgcm93ID0gc3RhcnRSb3c7IHJvdyA8PSBlbmRSb3c7IHJvdysrKSB7XG4gICAgICAgIGlmKCF0aGlzLm1hcFtjb2x1bW5dIHx8ICF0aGlzLm1hcFtjb2x1bW5dW3Jvd10pXG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBsZXQgdGV4dHVyZSA9IHRoaXMubWFwW2NvbHVtbl1bcm93XVxuXG4gICAgICAgIGlmKHRleHR1cmUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGxldCBhYnNvbHV0ZVBvc2l0aW9uID0geyB4OiAoY29sdW1uICogdGhpcy50ZXh0dXJlU2l6ZSksIHk6IChyb3cgKiB0aGlzLnRleHR1cmVTaXplKSB9XG4gICAgICAgIGxldCBwb3MgPSBDb2xsaXNpb24udmVjdG9yRGlmZmVyZW5jZShhYnNvbHV0ZVBvc2l0aW9uLCB0aGlzLnZpZXdQb3J0LnBvcylcbiAgICAgICAgbGV0IHJlbGF0aXZlUG9zaXRpb24gPSBDb2xsaXNpb24udmVjdG9yU3VtKHBvcywgeyB4OiBHYW1lLmNhbnZhcy53aWR0aCAtIHRoaXMudmlld1BvcnQud2lkdGgsIHk6IDAgfSlcblxuICAgICAgICBHYW1lLmN0eC5kcmF3SW1hZ2UodGV4dHVyZS5pbWcsIHJlbGF0aXZlUG9zaXRpb24ueCwgcmVsYXRpdmVQb3NpdGlvbi55LFxuICAgICAgICAgICAgdGV4dHVyZS53aWR0aCwgdGV4dHVyZS5oZWlnaHQpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUZXh0dXJlIGV4dGVuZHMgRW50aXR5IHtcbiAgY29uc3RydWN0b3IoeCwgeSwga2V5LCBpbWcpIHtcbiAgICBzdXBlcih4LCB5LCBpbWcud2lkdGgsIGltZy5oZWlnaHQpXG4gICAgdGhpcy5uYW1lID0gXCJUZXh0dXJlXCJcbiAgICB0aGlzLmtleSA9IGtleVxuICAgIHRoaXMuaW1nID0gaW1nXG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUFvQkE7QUEzREE7QUFDQTtBQTZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN0VBO0FBQ0E7QUErRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBOUlBO0FBQ0E7QUFnSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/map.js\n");

/***/ }),

/***/ "./src/map_editor.js":
/*!***************************!*\
  !*** ./src/map_editor.js ***!
  \***************************/
/*! exports provided: init, update */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return init; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"update\", function() { return update; });\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./entity */ \"./src/entity.js\");\n/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./map */ \"./src/map.js\");\n/* harmony import */ var _view_port__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./view_port */ \"./src/view_port.js\");\n/* harmony import */ var _ui_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui/ui */ \"./src/ui/ui.js\");\n/* harmony import */ var _mini_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mini_map */ \"./src/mini_map.js\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./collision */ \"./src/collision.js\");\n\n\n\n\n\n\n\nconst textureSize = 32;\n\nlet viewPort = undefined;\n\nclass SideMenu extends _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].UIElement {\n  constructor(canvas, map, viewPort) {\n    let properties = {\n      backgroundColor: '#dbcdae',\n      width: canvas.width - viewPort.width,\n      height: viewPort.height,\n      alignment: \"left\",\n      verticalAlignment: \"top\",\n      children: [{\n        className: _mini_map__WEBPACK_IMPORTED_MODULE_4__[\"MiniMap\"],\n        properties: {\n          map: map,\n          viewPort: viewPort\n        }\n      }, {\n        className: _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].Grid,\n        properties: {\n          height: \"40%\",\n          width: \"80%\",\n          rowHeight: 30,\n          rowMargin: 10,\n          alignment: \"center\",\n          verticalAlignment: \"top\",\n          rows: [[{\n            className: _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].Button,\n            properties: { text: \"Load Map\", event_object: Game.events, clickAction: SideMenu.loadMapLoaderMenu }\n          }], [{\n            className: _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].Button,\n            properties: { text: \"Save Map\", event_object: Game.events, clickAction: SideMenu.saveMap }\n          }], [{\n            className: _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].Button,\n            properties: { text: \"Main Menu\", event_object: Game.events, clickAction: SideMenu.loadMainMenu }\n          }]]\n        }\n      }]\n    };\n\n    super(canvas, properties);\n    this.name = \"UI.SideMenu\";\n    this.map = map;\n  }\n\n  static saveMap() {\n    let target = this;\n    while (target.map === undefined) {\n      target = target.parent;\n    }\n    target.map.save();\n  }\n\n  static loadMainMenu() {\n    Game.setState(\"load_main_menu\");\n  }\n\n  static loadMapLoaderMenu() {\n    // second param needs to be the properties\n    let mapLoaderMenu = new MapLoaderMenu(this.canvas, {});\n  }\n\n  static exitMapLoaderMenu() {}\n}\n\nclass MapLoaderMenu extends _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].PopupMenu {\n  constructor(canvas, properties) {\n    properties[\"children\"] = [{\n      className: _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].HeaderTitle,\n      properties: {\n        alignment: \"center\",\n        color: \"#000000\"\n      }\n    }, {\n      className: _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].List,\n      properties: {\n        height: \"70%\",\n        width: \"60%\",\n        rowHeight: 20,\n        alignment: \"center\",\n        verticalAlignment: \"top\",\n        items: []\n      }\n    }, {\n      className: _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].Button,\n      properties: {\n        text: \"Cancel\",\n        margin: 10,\n        alignment: \"left\",\n        event_object: Game.events,\n        clickAction: SideMenu.exitMapLoaderMenu\n      }\n    }, {\n      className: _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].Button,\n      properties: {\n        text: \"Load Map\",\n        margin: 10,\n        alignment: \"right\",\n        event_object: Game.events,\n        clickAction: MapLoaderMenu.loadMap\n      }\n    }];\n\n    super(canvas, properties);\n    this.name = \"UI.MapLoaderMenu\";\n    this.page = 1;\n    this.mapData = [];\n  }\n\n  getMapsData() {\n    $.ajax({\n      method: \"GET\",\n      url: '/maps',\n      data: { layout: JSON.stringify(this.layout) },\n      error: error => {\n        console.log(`ERROR: response text: ${error.responseText}, status: ${error.status}`);\n      },\n      success: (data => {\n        // Going to have to work/modify this data either server side or client side\n        mapsUIPreviewData = data;\n        this.mapData = mapsUIPreviewData;\n        this.updateMapList();\n      }).bind(this)\n    });\n  }\n\n  updateMapList() {\n    this.children[1].items = this.mapData;\n  }\n\n  static loadMap() {\n    // de-serialize the map and load it into the map object here\n  }\n}\n\nclass TextureMenu extends _ui_ui__WEBPACK_IMPORTED_MODULE_3__[\"UI\"].UIElement {\n  constructor(canvas, properties) {\n    super(canvas, properties);\n    this.name = \"UI.TextureMenu\";\n    this.textures = properties['textures'];\n    this.selectedTexture = null;\n    this.textureWidth = this.textures[Object.keys(this.textures)[0]].width;\n    this.setupMenuProperties();\n    this.texturesPerPage = this.textureColumnCount * this.textureRowCount;\n\n    this.initTextureObjects();\n    this.totalPages = this.textureObjects.length;\n    this.page = 0;\n    this.setupIcons();\n  }\n\n  setupMenuProperties() {\n    this.imagePadding = 5;\n    let minimumLeftPadding = 80;\n    let minimumRightPadding = 40;\n    let minimumTextureRowWidth = this.width - (minimumLeftPadding + minimumRightPadding);\n    this.textureColumnCount = Math.trunc(minimumTextureRowWidth / (this.textureWidth + this.imagePadding));\n    let textureRowWidth = this.textureColumnCount * (this.textureWidth + this.imagePadding) - this.imagePadding;\n\n    let minimumTextureRowHeight = this.height - this.imagePadding * 2;\n    this.textureRowCount = Math.trunc(minimumTextureRowHeight / (this.textureWidth + this.imagePadding));\n    let textureRowHeight = this.textureRowCount * (this.textureWidth + this.imagePadding) - this.imagePadding;\n\n    this.rightPadding = (this.width - textureRowWidth) / 3;\n    this.leftPadding = this.rightPadding * 2;\n    this.topBottomPadding = (this.height - textureRowHeight) / 2;\n  }\n\n  setupIcons() {\n    let allIcons = Game.AssetManager.imgs[\"icons\"];\n    this.icons = {};\n\n    let icon = allIcons[\"left_arrow\"];\n    icon.pos = { x: this.imagePadding, y: this.pos.y + this.height / 2 - icon.height / 2 };\n    icon.clickAction = this.previousPage.bind(this);\n    if (this.page <= 0) icon.hidden = true;\n    this.icons[\"left_arrow\"] = icon;\n\n    icon = allIcons[\"right_arrow\"];\n    icon.pos = { x: this.width - icon.width - this.imagePadding, y: this.pos.y + this.height / 2 - icon.height / 2 };\n    icon.clickAction = this.nextPage.bind(this);\n    if (this.page >= this.totalPages - 1) icon.hidden = true;\n    this.icons[\"right_arrow\"] = icon;\n\n    icon = allIcons[\"eraser\"];\n    let eraserPadding = this.rightPadding - this.imagePadding;\n    icon.pos = { x: eraserPadding, y: this.pos.y + this.height / 2 - icon.height / 2 };\n    icon.clickAction = this.setErase.bind(this);\n    this.icons[\"eraser\"] = icon;\n  }\n\n  initTextureObjects() {\n    let x = this.pos.x + this.leftPadding;\n    let y = this.pos.y + this.topBottomPadding;\n    let currentRow = 0;\n    let currentColumn = 0;\n\n    let textureKeys = Object.keys(this.textures);\n    let page = 0;\n    this.textureObjects = [[]];\n\n    for (let key of textureKeys) {\n      let texture = new _map__WEBPACK_IMPORTED_MODULE_1__[\"Texture\"](x, y, key, this.textures[key]);\n      this.textureObjects[page].push(texture);\n      currentColumn++;\n\n      x += texture.width + this.imagePadding;\n      if (currentColumn >= this.textureColumnCount) {\n        x = this.pos.x + this.leftPadding;\n        y += texture.height + this.imagePadding;\n        currentColumn = 0;\n        currentRow++;\n        if (currentRow >= this.textureRowCount) {\n          y = this.pos.y + this.topBottomPadding;\n          currentRow = 0;\n          page++;\n          this.textureObjects[page] = [];\n        }\n      }\n    }\n  }\n\n  updateArrowIcons() {\n    if (this.page == this.totalPages - 1) this.icons[\"right_arrow\"].hidden = true;else this.icons[\"right_arrow\"].hidden = false;\n\n    if (this.page == 0) this.icons[\"left_arrow\"].hidden = true;else this.icons[\"left_arrow\"].hidden = false;\n  }\n\n  nextPage() {\n    if (this.page >= this.totalPages - 1) return;\n    this.page++;\n    this.updateArrowIcons();\n  }\n\n  previousPage() {\n    if (this.page <= 0) return;\n    this.page--;\n    this.updateArrowIcons();\n  }\n\n  setErase() {\n    this.selectedTexture = 'eraser';\n  }\n\n  draw() {\n    this.ctx.beginPath();\n    this.ctx.fillStyle = this.backgroundColor;\n    this.ctx.fillRect(this.pos.x, this.pos.y, this.width, this.height);\n\n    for (let texture of this.textureObjects[this.page]) {\n      this.ctx.drawImage(texture.img, texture.pos.x, texture.pos.y, texture.width, texture.height);\n      if (this.selectedTexture && this.selectedTexture.id == texture.id) {\n        this.ctx.lineWidth = 3;\n        this.ctx.strokeStyle = \"#00ff00\";\n        this.ctx.strokeRect(texture.pos.x, texture.pos.y, texture.width, texture.height);\n      }\n      if (texture.hovering && (!this.selectedTexture || this.selectedTexture && this.selectedTexture.id != texture.id)) {\n        this.ctx.lineWidth = 2;\n        this.ctx.strokeStyle = \"#90c3d4\";\n        this.ctx.strokeRect(texture.pos.x, texture.pos.y, texture.width, texture.height);\n      }\n    }\n\n    for (let iconKey of Object.keys(this.icons)) {\n      let icon = this.icons[iconKey];\n      if (!icon.hidden) this.ctx.drawImage(icon, icon.pos.x, icon.pos.y, icon.width, icon.height);\n    }\n  }\n\n  update() {\n    if (_collision__WEBPACK_IMPORTED_MODULE_5__[\"intersects\"](this, Game.events.mouse)) {\n      for (let texture of this.textureObjects[this.page]) {\n        if (_collision__WEBPACK_IMPORTED_MODULE_5__[\"intersects\"](texture, Game.events.mouse)) {\n          texture.hovering = true;\n          if (Game.events.mouse.clicked) {\n            this.selectedTexture = texture;\n          }\n        } else {\n          texture.hovering = false;\n        }\n      }\n\n      if (Game.events.mouse.clicked) {\n        Game.events.mouse.clicked = false;\n        for (let iconKey of Object.keys(this.icons)) {\n          let icon = this.icons[iconKey];\n          if (!icon.hidden && _collision__WEBPACK_IMPORTED_MODULE_5__[\"intersects\"](icon, Game.events.mouse)) icon.clickAction();\n        }\n      }\n    }\n  }\n}\n\nclass Grid extends _entity__WEBPACK_IMPORTED_MODULE_0__[\"Entity\"] {\n  constructor(_map, _viewPort, _textureMenu, _sideMenu, size = 32) {\n    let width = Game.canvas.width - _sideMenu.width - Game.canvas.width % size;\n    let height = _textureMenu.pos.y - _textureMenu.pos.y % size;\n    super(_sideMenu.width, 0, width, height);\n\n    this.name = \"Grid\";\n    this.drawWidth = this.canvas.width - _sideMenu.width;\n    this.drawHeight = _textureMenu.pos.y;\n    this.drawX = _sideMenu.width;\n    this.drawY = 0;\n    this.size = size;\n    this.color = \"#cccccc\";\n    this.map = _map;\n    this.viewPort = _viewPort;\n    this.textureMenu = _textureMenu;\n    this.sideMenu = _sideMenu;\n    this.texturePreview = null;\n    this.lastTexturePlacedAt = null;\n    this.texturePreviewAlpha = 0.3;\n    this.undoing = false;\n    this.redoing = false;\n    this.addToLastCommand = false;\n  }\n\n  resetDimensions() {\n    let xToRight = this.canvas.width - this.pos.x;\n    this.width = xToRight - xToRight % this.size;\n    let yToBottom = this.textureMenu.pos.y - this.pos.y;\n    this.height = yToBottom - yToBottom % this.size;\n  }\n\n  draw() {\n    this.ctx.beginPath();\n    for (let x = this.pos.x + 0.5; x <= this.drawWidth + this.drawX; x += this.size) {\n      this.ctx.moveTo(x, this.drawY);\n      this.ctx.lineTo(x, this.drawHeight);\n    }\n\n    for (let y = this.pos.y + 0.5; y <= this.drawHeight; y += this.size) {\n      this.ctx.moveTo(this.drawX, y);\n      this.ctx.lineTo(this.drawWidth + this.drawX, y);\n    }\n\n    this.ctx.strokeStyle = this.color;\n    this.ctx.lineWidth = 1;\n    this.ctx.stroke();\n\n    if (this.texturePreview && !this.viewPort.positionAtDragStart) {\n      this.ctx.save();\n      this.ctx.globalAlpha = this.texturePreviewAlpha;\n\n      let texture = this.texturePreview;\n      this.ctx.drawImage(texture.img, texture.pos.x, texture.pos.y, texture.width, texture.height);\n\n      this.ctx.restore();\n    }\n  }\n\n  update() {\n    let xOffset = this.viewPort.pos.x % this.size;\n    let yOffset = this.viewPort.pos.y % this.size;\n\n    let x = this.sideMenu.width + (xOffset ? this.size - xOffset : 0);\n    let y = yOffset ? this.size - yOffset : 0;\n    this.move(x, y);\n    this.resetDimensions();\n\n    if (!this.undoing && (Game.events.controlKeysDown[90] || Game.events.keysDown[85])) {\n      this.undoing = true;\n      this.map.commandHistory.undo();\n    } else if (this.undoing && !(Game.events.controlKeysDown[90] || Game.events.keysDown[85])) {\n      this.undoing = false;\n    }\n\n    if (!this.redoing && (Game.events.controlKeysDown[82] || Game.events.controlKeysDown[89])) {\n      this.redoing = true;\n      this.map.commandHistory.redo();\n    } else if (this.redoing && !(Game.events.controlKeysDown[82] || Game.events.controlKeysDown[89])) {\n      this.redoing = false;\n    }\n\n    if (this.textureMenu.selectedTexture) {\n      if (_collision__WEBPACK_IMPORTED_MODULE_5__[\"intersects\"](this, Game.events.mouse)) {\n        let columnIntersected = Math.trunc((Game.events.mouse.x - this.pos.x) / this.size);\n        let rowIntersected = Math.trunc((Game.events.mouse.y - this.pos.y) / this.size);\n\n        let x = this.pos.x + columnIntersected * this.size;\n        let y = this.pos.y + rowIntersected * this.size;\n\n        if (this.textureMenu.selectedTexture != 'eraser') {\n          if (this.texturePreview) {\n            this.texturePreview.pos = { x, y };\n          } else {\n            this.texturePreview = new _map__WEBPACK_IMPORTED_MODULE_1__[\"Texture\"](x, y, this.textureMenu.selectedTexture.key, this.textureMenu.selectedTexture.img);\n          }\n        }\n\n        if (Game.events.mouse.rightDown) {\n          if (!this.lastTexturePlacedAt || !_collision__WEBPACK_IMPORTED_MODULE_5__[\"pointsAreEqual\"]({ x, y }, this.lastTexturePlacedAt)) {\n\n            this.lastTexturePlacedAt = { x, y };\n            if (this.textureMenu.selectedTexture == 'eraser') {\n              if (this.map.removeTile({ x, y }, this.addToLastCommand)) {\n                this.addToLastCommand = true;\n              }\n            } else {\n              this.map.addTile(this.texturePreview, this.addToLastCommand);\n              this.addToLastCommand = true;\n            }\n          }\n        } else if (this.lastTexturePlacedAt && !Game.events.mouse.rightDown) {\n          this.lastTexturePlacedAt = null;\n          this.addToLastCommand = false;\n        }\n      } else {\n        this.texturePreview = null;\n      }\n    }\n  }\n}\n\nlet update = () => {\n  viewPort.update();\n};\n\nlet init = () => {\n  let ctx = Game.ctx;\n  let canvas = Game.canvas;\n  let map = new _map__WEBPACK_IMPORTED_MODULE_1__[\"Map\"](canvas.width * 2, canvas.height * 2, textureSize);\n\n  let viewPortWidth = canvas.width - canvas.width / 5;\n  let viewPortHeight = canvas.height - canvas.height / 5;\n\n  viewPort = new _view_port__WEBPACK_IMPORTED_MODULE_2__[\"ViewPort\"](viewPortWidth, viewPortHeight, map);\n  let textureMenu = new TextureMenu(canvas, {\n    height: Game.canvas.height - viewPort.height,\n    verticalAlignment: \"bottom\",\n    backgroundColor: '#2a1d16',\n    textures: Game.AssetManager.imgs[\"textures\"]\n\n  });\n\n  let sideMenu = new SideMenu(canvas, map, viewPort);\n\n  let grid = new Grid(map, viewPort, textureMenu, sideMenu);\n\n  Game.uiElements.push([textureMenu, sideMenu]);\n  Game.environmentElements.push([map, grid]);\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFwX2VkaXRvci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvbWFwX2VkaXRvci5qcz85ZjMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4vZW50aXR5J1xuaW1wb3J0IHsgTWFwLCBUZXh0dXJlIH0gZnJvbSAnLi9tYXAnXG5pbXBvcnQgeyBWaWV3UG9ydCB9IGZyb20gJy4vdmlld19wb3J0J1xuaW1wb3J0IHsgVUkgfSBmcm9tICcuL3VpL3VpJ1xuaW1wb3J0IHsgTWluaU1hcCB9IGZyb20gJy4vbWluaV9tYXAnXG5pbXBvcnQgKiBhcyBDb2xsaXNpb24gZnJvbSAnLi9jb2xsaXNpb24nXG5cbmNvbnN0IHRleHR1cmVTaXplID0gMzJcblxubGV0IHZpZXdQb3J0ID0gdW5kZWZpbmVkXG5cbmNsYXNzIFNpZGVNZW51IGV4dGVuZHMgVUkuVUlFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoY2FudmFzLCBtYXAsIHZpZXdQb3J0KSB7XG4gICAgbGV0IHByb3BlcnRpZXMgPSB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZGJjZGFlJyxcbiAgICAgIHdpZHRoOiBjYW52YXMud2lkdGggLSB2aWV3UG9ydC53aWR0aCxcbiAgICAgIGhlaWdodDogdmlld1BvcnQuaGVpZ2h0LFxuICAgICAgYWxpZ25tZW50OiBcImxlZnRcIixcbiAgICAgIHZlcnRpY2FsQWxpZ25tZW50OiBcInRvcFwiLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogTWluaU1hcCxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgIHZpZXdQb3J0OiB2aWV3UG9ydFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogVUkuR3JpZCxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBoZWlnaHQ6IFwiNDAlXCIsXG4gICAgICAgICAgICB3aWR0aDogXCI4MCVcIixcbiAgICAgICAgICAgIHJvd0hlaWdodDogMzAsXG4gICAgICAgICAgICByb3dNYXJnaW46IDEwLFxuICAgICAgICAgICAgYWxpZ25tZW50OiBcImNlbnRlclwiLFxuICAgICAgICAgICAgdmVydGljYWxBbGlnbm1lbnQ6IFwidG9wXCIsXG4gICAgICAgICAgICByb3dzOiBbXG4gICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFVJLkJ1dHRvbixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHt0ZXh0OiBcIkxvYWQgTWFwXCIsIGV2ZW50X29iamVjdDogR2FtZS5ldmVudHMsIGNsaWNrQWN0aW9uOiBTaWRlTWVudS5sb2FkTWFwTG9hZGVyTWVudX1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFVJLkJ1dHRvbixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHt0ZXh0OiBcIlNhdmUgTWFwXCIsIGV2ZW50X29iamVjdDogR2FtZS5ldmVudHMsIGNsaWNrQWN0aW9uOiBTaWRlTWVudS5zYXZlTWFwfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogVUkuQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge3RleHQ6IFwiTWFpbiBNZW51XCIsIGV2ZW50X29iamVjdDogR2FtZS5ldmVudHMsIGNsaWNrQWN0aW9uOiBTaWRlTWVudS5sb2FkTWFpbk1lbnV9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cblxuICAgIHN1cGVyKGNhbnZhcywgcHJvcGVydGllcylcbiAgICB0aGlzLm5hbWUgPSBcIlVJLlNpZGVNZW51XCJcbiAgICB0aGlzLm1hcCA9IG1hcFxuICB9XG5cbiAgc3RhdGljIHNhdmVNYXAoKSB7XG4gICAgbGV0IHRhcmdldCA9IHRoaXNcbiAgICB3aGlsZSh0YXJnZXQubWFwID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnRcbiAgICB9XG4gICAgdGFyZ2V0Lm1hcC5zYXZlKClcbiAgfVxuXG4gIHN0YXRpYyBsb2FkTWFpbk1lbnUoKSB7XG4gICAgR2FtZS5zZXRTdGF0ZShcImxvYWRfbWFpbl9tZW51XCIpXG4gIH1cblxuICBzdGF0aWMgbG9hZE1hcExvYWRlck1lbnUoKSB7XG4gICAgLy8gc2Vjb25kIHBhcmFtIG5lZWRzIHRvIGJlIHRoZSBwcm9wZXJ0aWVzXG4gICAgbGV0IG1hcExvYWRlck1lbnUgPSBuZXcgTWFwTG9hZGVyTWVudSh0aGlzLmNhbnZhcywge30pXG4gIH1cblxuICBzdGF0aWMgZXhpdE1hcExvYWRlck1lbnUoKSB7XG5cbiAgfVxufVxuXG5jbGFzcyBNYXBMb2FkZXJNZW51IGV4dGVuZHMgVUkuUG9wdXBNZW51IHtcbiAgY29uc3RydWN0b3IoY2FudmFzLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllc1tcImNoaWxkcmVuXCJdID0gW1xuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IFVJLkhlYWRlclRpdGxlLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgYWxpZ25tZW50OiBcImNlbnRlclwiLFxuICAgICAgICAgIGNvbG9yOiBcIiMwMDAwMDBcIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IFVJLkxpc3QsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBoZWlnaHQ6IFwiNzAlXCIsXG4gICAgICAgICAgd2lkdGg6IFwiNjAlXCIsXG4gICAgICAgICAgcm93SGVpZ2h0OiAyMCxcbiAgICAgICAgICBhbGlnbm1lbnQ6IFwiY2VudGVyXCIsXG4gICAgICAgICAgdmVydGljYWxBbGlnbm1lbnQ6IFwidG9wXCIsXG4gICAgICAgICAgaXRlbXM6IFtdXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogVUkuQnV0dG9uLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgdGV4dDogXCJDYW5jZWxcIixcbiAgICAgICAgICBtYXJnaW46IDEwLFxuICAgICAgICAgIGFsaWdubWVudDogXCJsZWZ0XCIsXG4gICAgICAgICAgZXZlbnRfb2JqZWN0OiBHYW1lLmV2ZW50cyxcbiAgICAgICAgICBjbGlja0FjdGlvbjogU2lkZU1lbnUuZXhpdE1hcExvYWRlck1lbnVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3NOYW1lOiBVSS5CdXR0b24sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICB0ZXh0OiBcIkxvYWQgTWFwXCIsXG4gICAgICAgICAgbWFyZ2luOiAxMCxcbiAgICAgICAgICBhbGlnbm1lbnQ6IFwicmlnaHRcIixcbiAgICAgICAgICBldmVudF9vYmplY3Q6IEdhbWUuZXZlbnRzLFxuICAgICAgICAgIGNsaWNrQWN0aW9uOiBNYXBMb2FkZXJNZW51LmxvYWRNYXBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIF1cblxuICAgIHN1cGVyKGNhbnZhcywgcHJvcGVydGllcylcbiAgICB0aGlzLm5hbWUgPSBcIlVJLk1hcExvYWRlck1lbnVcIlxuICAgIHRoaXMucGFnZSA9IDFcbiAgICB0aGlzLm1hcERhdGEgPSBbXVxuICB9XG5cbiAgZ2V0TWFwc0RhdGEoKSB7XG4gICAgJC5hamF4KHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIHVybDogJy9tYXBzJyxcbiAgICAgIGRhdGE6IHsgbGF5b3V0OiBKU09OLnN0cmluZ2lmeSh0aGlzLmxheW91dCl9LFxuICAgICAgZXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgRVJST1I6IHJlc3BvbnNlIHRleHQ6ICR7ZXJyb3IucmVzcG9uc2VUZXh0fSwgc3RhdHVzOiAke2Vycm9yLnN0YXR1c31gKVxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6ICgoZGF0YSkgPT4ge1xuICAgICAgICAvLyBHb2luZyB0byBoYXZlIHRvIHdvcmsvbW9kaWZ5IHRoaXMgZGF0YSBlaXRoZXIgc2VydmVyIHNpZGUgb3IgY2xpZW50IHNpZGVcbiAgICAgICAgbWFwc1VJUHJldmlld0RhdGEgPSBkYXRhXG4gICAgICAgIHRoaXMubWFwRGF0YSA9IG1hcHNVSVByZXZpZXdEYXRhXG4gICAgICAgIHRoaXMudXBkYXRlTWFwTGlzdCgpXG4gICAgICB9KS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVNYXBMaXN0KCkge1xuICAgIHRoaXMuY2hpbGRyZW5bMV0uaXRlbXMgPSB0aGlzLm1hcERhdGFcbiAgfVxuXG4gIHN0YXRpYyBsb2FkTWFwKCkge1xuICAgIC8vIGRlLXNlcmlhbGl6ZSB0aGUgbWFwIGFuZCBsb2FkIGl0IGludG8gdGhlIG1hcCBvYmplY3QgaGVyZVxuICB9XG59XG5cbmNsYXNzIFRleHR1cmVNZW51IGV4dGVuZHMgVUkuVUlFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoY2FudmFzLCBwcm9wZXJ0aWVzKSB7XG4gICAgc3VwZXIoY2FudmFzLCBwcm9wZXJ0aWVzKVxuICAgIHRoaXMubmFtZSA9IFwiVUkuVGV4dHVyZU1lbnVcIlxuICAgIHRoaXMudGV4dHVyZXMgPSBwcm9wZXJ0aWVzWyd0ZXh0dXJlcyddXG4gICAgdGhpcy5zZWxlY3RlZFRleHR1cmUgPSBudWxsXG4gICAgdGhpcy50ZXh0dXJlV2lkdGggPSB0aGlzLnRleHR1cmVzW09iamVjdC5rZXlzKHRoaXMudGV4dHVyZXMpWzBdXS53aWR0aFxuICAgIHRoaXMuc2V0dXBNZW51UHJvcGVydGllcygpXG4gICAgdGhpcy50ZXh0dXJlc1BlclBhZ2UgPSB0aGlzLnRleHR1cmVDb2x1bW5Db3VudCAqIHRoaXMudGV4dHVyZVJvd0NvdW50XG5cbiAgICB0aGlzLmluaXRUZXh0dXJlT2JqZWN0cygpXG4gICAgdGhpcy50b3RhbFBhZ2VzID0gdGhpcy50ZXh0dXJlT2JqZWN0cy5sZW5ndGhcbiAgICB0aGlzLnBhZ2UgPSAwXG4gICAgdGhpcy5zZXR1cEljb25zKClcbiAgfVxuXG4gIHNldHVwTWVudVByb3BlcnRpZXMoKSB7XG4gICAgdGhpcy5pbWFnZVBhZGRpbmcgPSA1XG4gICAgbGV0IG1pbmltdW1MZWZ0UGFkZGluZyA9IDgwXG4gICAgbGV0IG1pbmltdW1SaWdodFBhZGRpbmcgPSA0MFxuICAgIGxldCBtaW5pbXVtVGV4dHVyZVJvd1dpZHRoID0gdGhpcy53aWR0aCAtIChtaW5pbXVtTGVmdFBhZGRpbmcgKyBtaW5pbXVtUmlnaHRQYWRkaW5nKVxuICAgIHRoaXMudGV4dHVyZUNvbHVtbkNvdW50ID0gTWF0aC50cnVuYyhtaW5pbXVtVGV4dHVyZVJvd1dpZHRoIC8gKHRoaXMudGV4dHVyZVdpZHRoICsgdGhpcy5pbWFnZVBhZGRpbmcpKVxuICAgIGxldCB0ZXh0dXJlUm93V2lkdGggPSAodGhpcy50ZXh0dXJlQ29sdW1uQ291bnQgKiAodGhpcy50ZXh0dXJlV2lkdGggKyB0aGlzLmltYWdlUGFkZGluZykpIC0gdGhpcy5pbWFnZVBhZGRpbmdcblxuICAgIGxldCBtaW5pbXVtVGV4dHVyZVJvd0hlaWdodCA9IHRoaXMuaGVpZ2h0IC0gKHRoaXMuaW1hZ2VQYWRkaW5nKjIpXG4gICAgdGhpcy50ZXh0dXJlUm93Q291bnQgPSBNYXRoLnRydW5jKG1pbmltdW1UZXh0dXJlUm93SGVpZ2h0IC8gKHRoaXMudGV4dHVyZVdpZHRoICsgdGhpcy5pbWFnZVBhZGRpbmcpKVxuICAgIGxldCB0ZXh0dXJlUm93SGVpZ2h0ID0gKHRoaXMudGV4dHVyZVJvd0NvdW50ICogKHRoaXMudGV4dHVyZVdpZHRoICsgdGhpcy5pbWFnZVBhZGRpbmcpKSAtIHRoaXMuaW1hZ2VQYWRkaW5nXG5cbiAgICB0aGlzLnJpZ2h0UGFkZGluZyA9ICh0aGlzLndpZHRoIC0gdGV4dHVyZVJvd1dpZHRoKSAvIDNcbiAgICB0aGlzLmxlZnRQYWRkaW5nID0gdGhpcy5yaWdodFBhZGRpbmcgKiAyXG4gICAgdGhpcy50b3BCb3R0b21QYWRkaW5nID0gKHRoaXMuaGVpZ2h0IC0gdGV4dHVyZVJvd0hlaWdodCkgLyAyXG4gIH1cblxuICBzZXR1cEljb25zKCkge1xuICAgIGxldCBhbGxJY29ucyA9IEdhbWUuQXNzZXRNYW5hZ2VyLmltZ3NbXCJpY29uc1wiXVxuICAgIHRoaXMuaWNvbnMgPSB7fVxuXG4gICAgbGV0IGljb24gPSBhbGxJY29uc1tcImxlZnRfYXJyb3dcIl1cbiAgICBpY29uLnBvcyA9IHsgeDogdGhpcy5pbWFnZVBhZGRpbmcsIHk6ICh0aGlzLnBvcy55ICsgKHRoaXMuaGVpZ2h0IC8gMikpIC0gKGljb24uaGVpZ2h0IC8gMikgfVxuICAgIGljb24uY2xpY2tBY3Rpb24gPSB0aGlzLnByZXZpb3VzUGFnZS5iaW5kKHRoaXMpXG4gICAgaWYodGhpcy5wYWdlIDw9IDApIGljb24uaGlkZGVuID0gdHJ1ZVxuICAgIHRoaXMuaWNvbnNbXCJsZWZ0X2Fycm93XCJdID0gaWNvblxuXG4gICAgaWNvbiA9IGFsbEljb25zW1wicmlnaHRfYXJyb3dcIl1cbiAgICBpY29uLnBvcyA9IHsgeDogKHRoaXMud2lkdGggLSBpY29uLndpZHRoKSAtIHRoaXMuaW1hZ2VQYWRkaW5nLCB5OiAodGhpcy5wb3MueSArICh0aGlzLmhlaWdodCAvIDIpKSAtIChpY29uLmhlaWdodCAvIDIpIH1cbiAgICBpY29uLmNsaWNrQWN0aW9uID0gdGhpcy5uZXh0UGFnZS5iaW5kKHRoaXMpXG4gICAgaWYodGhpcy5wYWdlID49ICh0aGlzLnRvdGFsUGFnZXMgLSAxKSkgaWNvbi5oaWRkZW4gPSB0cnVlXG4gICAgdGhpcy5pY29uc1tcInJpZ2h0X2Fycm93XCJdID0gaWNvblxuXG4gICAgaWNvbiA9IGFsbEljb25zW1wiZXJhc2VyXCJdXG4gICAgbGV0IGVyYXNlclBhZGRpbmcgPSB0aGlzLnJpZ2h0UGFkZGluZyAtIHRoaXMuaW1hZ2VQYWRkaW5nXG4gICAgaWNvbi5wb3MgPSB7IHg6IGVyYXNlclBhZGRpbmcsIHk6ICh0aGlzLnBvcy55ICsgKHRoaXMuaGVpZ2h0IC8gMikpIC0gKGljb24uaGVpZ2h0IC8gMikgfVxuICAgIGljb24uY2xpY2tBY3Rpb24gPSB0aGlzLnNldEVyYXNlLmJpbmQodGhpcylcbiAgICB0aGlzLmljb25zW1wiZXJhc2VyXCJdID0gaWNvblxuICB9XG5cbiAgaW5pdFRleHR1cmVPYmplY3RzKCkge1xuICAgIGxldCB4ID0gdGhpcy5wb3MueCArIHRoaXMubGVmdFBhZGRpbmdcbiAgICBsZXQgeSA9IHRoaXMucG9zLnkgKyB0aGlzLnRvcEJvdHRvbVBhZGRpbmdcbiAgICBsZXQgY3VycmVudFJvdyA9IDBcbiAgICBsZXQgY3VycmVudENvbHVtbiA9IDBcblxuICAgIGxldCB0ZXh0dXJlS2V5cyA9IE9iamVjdC5rZXlzKHRoaXMudGV4dHVyZXMpXG4gICAgbGV0IHBhZ2UgPSAwXG4gICAgdGhpcy50ZXh0dXJlT2JqZWN0cyA9IFtbXV1cblxuICAgIGZvcihsZXQga2V5IG9mIHRleHR1cmVLZXlzKSB7XG4gICAgICBsZXQgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKHgsIHksIGtleSwgdGhpcy50ZXh0dXJlc1trZXldKVxuICAgICAgdGhpcy50ZXh0dXJlT2JqZWN0c1twYWdlXS5wdXNoKHRleHR1cmUpXG4gICAgICBjdXJyZW50Q29sdW1uKytcblxuICAgICAgeCArPSB0ZXh0dXJlLndpZHRoICsgdGhpcy5pbWFnZVBhZGRpbmdcbiAgICAgIGlmKGN1cnJlbnRDb2x1bW4gPj0gdGhpcy50ZXh0dXJlQ29sdW1uQ291bnQpIHtcbiAgICAgICAgeCA9IHRoaXMucG9zLnggKyB0aGlzLmxlZnRQYWRkaW5nXG4gICAgICAgIHkgKz0gdGV4dHVyZS5oZWlnaHQgKyB0aGlzLmltYWdlUGFkZGluZ1xuICAgICAgICBjdXJyZW50Q29sdW1uID0gMFxuICAgICAgICBjdXJyZW50Um93KytcbiAgICAgICAgaWYoY3VycmVudFJvdyA+PSB0aGlzLnRleHR1cmVSb3dDb3VudCkge1xuICAgICAgICAgIHkgPSB0aGlzLnBvcy55ICsgdGhpcy50b3BCb3R0b21QYWRkaW5nXG4gICAgICAgICAgY3VycmVudFJvdyA9IDBcbiAgICAgICAgICBwYWdlKytcbiAgICAgICAgICB0aGlzLnRleHR1cmVPYmplY3RzW3BhZ2VdID0gW11cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUFycm93SWNvbnMoKSB7XG4gICAgaWYodGhpcy5wYWdlID09ICh0aGlzLnRvdGFsUGFnZXMgLSAxKSlcbiAgICAgIHRoaXMuaWNvbnNbXCJyaWdodF9hcnJvd1wiXS5oaWRkZW4gPSB0cnVlXG4gICAgZWxzZVxuICAgICAgdGhpcy5pY29uc1tcInJpZ2h0X2Fycm93XCJdLmhpZGRlbiA9IGZhbHNlXG5cbiAgICBpZih0aGlzLnBhZ2UgPT0gMClcbiAgICAgIHRoaXMuaWNvbnNbXCJsZWZ0X2Fycm93XCJdLmhpZGRlbiA9IHRydWVcbiAgICBlbHNlXG4gICAgICB0aGlzLmljb25zW1wibGVmdF9hcnJvd1wiXS5oaWRkZW4gPSBmYWxzZVxuICB9XG5cbiAgbmV4dFBhZ2UoKSB7XG4gICAgaWYodGhpcy5wYWdlID49ICh0aGlzLnRvdGFsUGFnZXMgLSAxKSkgcmV0dXJuXG4gICAgdGhpcy5wYWdlKytcbiAgICB0aGlzLnVwZGF0ZUFycm93SWNvbnMoKVxuICB9XG5cbiAgcHJldmlvdXNQYWdlKCkge1xuICAgIGlmKHRoaXMucGFnZSA8PSAwKSByZXR1cm5cbiAgICB0aGlzLnBhZ2UtLVxuICAgIHRoaXMudXBkYXRlQXJyb3dJY29ucygpXG4gIH1cblxuICBzZXRFcmFzZSgpIHtcbiAgICB0aGlzLnNlbGVjdGVkVGV4dHVyZSA9ICdlcmFzZXInXG4gIH1cblxuICBkcmF3KCkge1xuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpXG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5iYWNrZ3JvdW5kQ29sb3JcbiAgICB0aGlzLmN0eC5maWxsUmVjdCh0aGlzLnBvcy54LCB0aGlzLnBvcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodClcblxuICAgIGZvcihsZXQgdGV4dHVyZSBvZiB0aGlzLnRleHR1cmVPYmplY3RzW3RoaXMucGFnZV0pIHtcbiAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZSh0ZXh0dXJlLmltZywgdGV4dHVyZS5wb3MueCwgdGV4dHVyZS5wb3MueSwgdGV4dHVyZS53aWR0aCwgdGV4dHVyZS5oZWlnaHQpXG4gICAgICBpZih0aGlzLnNlbGVjdGVkVGV4dHVyZSAmJiB0aGlzLnNlbGVjdGVkVGV4dHVyZS5pZCA9PSB0ZXh0dXJlLmlkKSB7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDNcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBcIiMwMGZmMDBcIlxuICAgICAgICB0aGlzLmN0eC5zdHJva2VSZWN0KHRleHR1cmUucG9zLngsIHRleHR1cmUucG9zLnksIHRleHR1cmUud2lkdGgsIHRleHR1cmUuaGVpZ2h0KVxuICAgICAgfVxuICAgICAgaWYodGV4dHVyZS5ob3ZlcmluZyAmJiAoIXRoaXMuc2VsZWN0ZWRUZXh0dXJlIHx8XG4gICAgICAgICAgICAodGhpcy5zZWxlY3RlZFRleHR1cmUgJiZcbiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRleHR1cmUuaWQgIT0gdGV4dHVyZS5pZCkpKSB7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDJcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBcIiM5MGMzZDRcIlxuICAgICAgICB0aGlzLmN0eC5zdHJva2VSZWN0KHRleHR1cmUucG9zLngsIHRleHR1cmUucG9zLnksIHRleHR1cmUud2lkdGgsIHRleHR1cmUuaGVpZ2h0KVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvcihsZXQgaWNvbktleSBvZiBPYmplY3Qua2V5cyh0aGlzLmljb25zKSkge1xuICAgICAgbGV0IGljb24gPSB0aGlzLmljb25zW2ljb25LZXldXG4gICAgICBpZighaWNvbi5oaWRkZW4pXG4gICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZShpY29uLCBpY29uLnBvcy54LCBpY29uLnBvcy55LCBpY29uLndpZHRoLCBpY29uLmhlaWdodClcbiAgICB9XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgaWYoQ29sbGlzaW9uLmludGVyc2VjdHModGhpcywgR2FtZS5ldmVudHMubW91c2UpKSB7XG4gICAgICBmb3IobGV0IHRleHR1cmUgb2YgdGhpcy50ZXh0dXJlT2JqZWN0c1t0aGlzLnBhZ2VdKSB7XG4gICAgICAgIGlmKENvbGxpc2lvbi5pbnRlcnNlY3RzKHRleHR1cmUsIEdhbWUuZXZlbnRzLm1vdXNlKSkge1xuICAgICAgICAgIHRleHR1cmUuaG92ZXJpbmcgPSB0cnVlXG4gICAgICAgICAgaWYoR2FtZS5ldmVudHMubW91c2UuY2xpY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRleHR1cmUgPSB0ZXh0dXJlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHRleHR1cmUuaG92ZXJpbmcgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmKEdhbWUuZXZlbnRzLm1vdXNlLmNsaWNrZWQpIHtcbiAgICAgICAgR2FtZS5ldmVudHMubW91c2UuY2xpY2tlZCA9IGZhbHNlXG4gICAgICAgIGZvcihsZXQgaWNvbktleSBvZiBPYmplY3Qua2V5cyh0aGlzLmljb25zKSkge1xuICAgICAgICAgIGxldCBpY29uID0gdGhpcy5pY29uc1tpY29uS2V5XVxuICAgICAgICAgIGlmKCFpY29uLmhpZGRlbiAmJiBDb2xsaXNpb24uaW50ZXJzZWN0cyhpY29uLCBHYW1lLmV2ZW50cy5tb3VzZSkpXG4gICAgICAgICAgICBpY29uLmNsaWNrQWN0aW9uKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBHcmlkIGV4dGVuZHMgRW50aXR5IHtcbiAgY29uc3RydWN0b3IoX21hcCwgX3ZpZXdQb3J0LCBfdGV4dHVyZU1lbnUsIF9zaWRlTWVudSwgc2l6ZSA9IDMyKSB7XG4gICAgbGV0IHdpZHRoID0gR2FtZS5jYW52YXMud2lkdGggLSBfc2lkZU1lbnUud2lkdGggLSAoR2FtZS5jYW52YXMud2lkdGggJSBzaXplKVxuICAgIGxldCBoZWlnaHQgPSBfdGV4dHVyZU1lbnUucG9zLnkgLSAoX3RleHR1cmVNZW51LnBvcy55ICUgc2l6ZSlcbiAgICBzdXBlcihfc2lkZU1lbnUud2lkdGgsIDAsIHdpZHRoLCBoZWlnaHQpXG5cbiAgICB0aGlzLm5hbWUgPSBcIkdyaWRcIlxuICAgIHRoaXMuZHJhd1dpZHRoID0gdGhpcy5jYW52YXMud2lkdGggLSBfc2lkZU1lbnUud2lkdGhcbiAgICB0aGlzLmRyYXdIZWlnaHQgPSBfdGV4dHVyZU1lbnUucG9zLnlcbiAgICB0aGlzLmRyYXdYID0gX3NpZGVNZW51LndpZHRoXG4gICAgdGhpcy5kcmF3WSA9IDBcbiAgICB0aGlzLnNpemUgPSBzaXplXG4gICAgdGhpcy5jb2xvciA9IFwiI2NjY2NjY1wiXG4gICAgdGhpcy5tYXAgPSBfbWFwXG4gICAgdGhpcy52aWV3UG9ydCA9IF92aWV3UG9ydFxuICAgIHRoaXMudGV4dHVyZU1lbnUgPSBfdGV4dHVyZU1lbnVcbiAgICB0aGlzLnNpZGVNZW51ID0gX3NpZGVNZW51XG4gICAgdGhpcy50ZXh0dXJlUHJldmlldyA9IG51bGxcbiAgICB0aGlzLmxhc3RUZXh0dXJlUGxhY2VkQXQgPSBudWxsXG4gICAgdGhpcy50ZXh0dXJlUHJldmlld0FscGhhID0gMC4zXG4gICAgdGhpcy51bmRvaW5nID0gZmFsc2VcbiAgICB0aGlzLnJlZG9pbmcgPSBmYWxzZVxuICAgIHRoaXMuYWRkVG9MYXN0Q29tbWFuZCA9IGZhbHNlXG4gIH1cblxuICByZXNldERpbWVuc2lvbnMoKSB7XG4gICAgbGV0IHhUb1JpZ2h0ID0gdGhpcy5jYW52YXMud2lkdGggLSB0aGlzLnBvcy54XG4gICAgdGhpcy53aWR0aCA9IHhUb1JpZ2h0IC0gKHhUb1JpZ2h0ICUgdGhpcy5zaXplKVxuICAgIGxldCB5VG9Cb3R0b20gPSB0aGlzLnRleHR1cmVNZW51LnBvcy55IC0gdGhpcy5wb3MueVxuICAgIHRoaXMuaGVpZ2h0ID0geVRvQm90dG9tIC0gKHlUb0JvdHRvbSAlIHRoaXMuc2l6ZSlcbiAgfVxuXG4gIGRyYXcoKSB7XG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKClcbiAgICBmb3IobGV0IHggPSB0aGlzLnBvcy54ICsgMC41OyB4IDw9ICh0aGlzLmRyYXdXaWR0aCArIHRoaXMuZHJhd1gpOyB4ICs9IHRoaXMuc2l6ZSkge1xuICAgICAgdGhpcy5jdHgubW92ZVRvKHgsIHRoaXMuZHJhd1kpXG4gICAgICB0aGlzLmN0eC5saW5lVG8oeCwgdGhpcy5kcmF3SGVpZ2h0KVxuICAgIH1cblxuICAgIGZvcihsZXQgeSA9IHRoaXMucG9zLnkgKyAwLjU7IHkgPD0gdGhpcy5kcmF3SGVpZ2h0OyB5ICs9IHRoaXMuc2l6ZSkge1xuICAgICAgdGhpcy5jdHgubW92ZVRvKHRoaXMuZHJhd1gsIHkpXG4gICAgICB0aGlzLmN0eC5saW5lVG8odGhpcy5kcmF3V2lkdGggKyB0aGlzLmRyYXdYLCB5KVxuICAgIH1cblxuICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvclxuICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDFcbiAgICB0aGlzLmN0eC5zdHJva2UoKVxuXG4gICAgaWYodGhpcy50ZXh0dXJlUHJldmlldyAmJiAhdGhpcy52aWV3UG9ydC5wb3NpdGlvbkF0RHJhZ1N0YXJ0KSB7XG4gICAgICB0aGlzLmN0eC5zYXZlKClcbiAgICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gdGhpcy50ZXh0dXJlUHJldmlld0FscGhhXG5cbiAgICAgIGxldCB0ZXh0dXJlID0gdGhpcy50ZXh0dXJlUHJldmlld1xuICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKHRleHR1cmUuaW1nLCB0ZXh0dXJlLnBvcy54LCB0ZXh0dXJlLnBvcy55LCB0ZXh0dXJlLndpZHRoLCB0ZXh0dXJlLmhlaWdodClcblxuICAgICAgdGhpcy5jdHgucmVzdG9yZSgpXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGxldCB4T2Zmc2V0ID0gdGhpcy52aWV3UG9ydC5wb3MueCAlIHRoaXMuc2l6ZVxuICAgIGxldCB5T2Zmc2V0ID0gdGhpcy52aWV3UG9ydC5wb3MueSAlIHRoaXMuc2l6ZVxuXG4gICAgbGV0IHggPSB0aGlzLnNpZGVNZW51LndpZHRoICsgKHhPZmZzZXQgPyB0aGlzLnNpemUgLSB4T2Zmc2V0IDogMClcbiAgICBsZXQgeSA9IHlPZmZzZXQgPyB0aGlzLnNpemUgLSB5T2Zmc2V0IDogMFxuICAgIHRoaXMubW92ZSh4LCB5KVxuICAgIHRoaXMucmVzZXREaW1lbnNpb25zKClcblxuICAgIGlmKCF0aGlzLnVuZG9pbmcgJiYgKEdhbWUuZXZlbnRzLmNvbnRyb2xLZXlzRG93bls5MF0gfHwgR2FtZS5ldmVudHMua2V5c0Rvd25bODVdKSkge1xuICAgICAgdGhpcy51bmRvaW5nID0gdHJ1ZVxuICAgICAgdGhpcy5tYXAuY29tbWFuZEhpc3RvcnkudW5kbygpXG4gICAgfVxuICAgIGVsc2UgaWYodGhpcy51bmRvaW5nICYmICEoR2FtZS5ldmVudHMuY29udHJvbEtleXNEb3duWzkwXSB8fCBHYW1lLmV2ZW50cy5rZXlzRG93bls4NV0pKSB7XG4gICAgICB0aGlzLnVuZG9pbmcgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmKCF0aGlzLnJlZG9pbmcgJiYgKEdhbWUuZXZlbnRzLmNvbnRyb2xLZXlzRG93bls4Ml0gfHwgR2FtZS5ldmVudHMuY29udHJvbEtleXNEb3duWzg5XSkpIHtcbiAgICAgIHRoaXMucmVkb2luZyA9IHRydWVcbiAgICAgIHRoaXMubWFwLmNvbW1hbmRIaXN0b3J5LnJlZG8oKVxuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLnJlZG9pbmcgJiYgIShHYW1lLmV2ZW50cy5jb250cm9sS2V5c0Rvd25bODJdIHx8IEdhbWUuZXZlbnRzLmNvbnRyb2xLZXlzRG93bls4OV0pKSB7XG4gICAgICB0aGlzLnJlZG9pbmcgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmKHRoaXMudGV4dHVyZU1lbnUuc2VsZWN0ZWRUZXh0dXJlKSB7XG4gICAgICBpZihDb2xsaXNpb24uaW50ZXJzZWN0cyh0aGlzLCBHYW1lLmV2ZW50cy5tb3VzZSkpIHtcbiAgICAgICAgbGV0IGNvbHVtbkludGVyc2VjdGVkID0gTWF0aC50cnVuYygoR2FtZS5ldmVudHMubW91c2UueCAtIHRoaXMucG9zLngpIC8gdGhpcy5zaXplKVxuICAgICAgICBsZXQgcm93SW50ZXJzZWN0ZWQgPSBNYXRoLnRydW5jKChHYW1lLmV2ZW50cy5tb3VzZS55IC0gdGhpcy5wb3MueSkgLyB0aGlzLnNpemUpXG5cbiAgICAgICAgbGV0IHggPSB0aGlzLnBvcy54ICsgKGNvbHVtbkludGVyc2VjdGVkICogdGhpcy5zaXplKVxuICAgICAgICBsZXQgeSA9IHRoaXMucG9zLnkgKyAocm93SW50ZXJzZWN0ZWQgKiB0aGlzLnNpemUpXG5cbiAgICAgICAgaWYodGhpcy50ZXh0dXJlTWVudS5zZWxlY3RlZFRleHR1cmUgIT0gJ2VyYXNlcicpIHtcbiAgICAgICAgICBpZih0aGlzLnRleHR1cmVQcmV2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmVQcmV2aWV3LnBvcyA9IHt4LCB5fVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZVByZXZpZXcgPSBuZXcgVGV4dHVyZSh4LCB5LCB0aGlzLnRleHR1cmVNZW51LnNlbGVjdGVkVGV4dHVyZS5rZXksIHRoaXMudGV4dHVyZU1lbnUuc2VsZWN0ZWRUZXh0dXJlLmltZylcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZihHYW1lLmV2ZW50cy5tb3VzZS5yaWdodERvd24pIHtcbiAgICAgICAgICBpZighdGhpcy5sYXN0VGV4dHVyZVBsYWNlZEF0IHx8XG4gICAgICAgICAgICAgICFDb2xsaXNpb24ucG9pbnRzQXJlRXF1YWwoe3gsIHl9LCB0aGlzLmxhc3RUZXh0dXJlUGxhY2VkQXQpKSB7XG5cbiAgICAgICAgICAgIHRoaXMubGFzdFRleHR1cmVQbGFjZWRBdCA9IHt4LCB5fVxuICAgICAgICAgICAgaWYodGhpcy50ZXh0dXJlTWVudS5zZWxlY3RlZFRleHR1cmUgPT0gJ2VyYXNlcicpIHtcbiAgICAgICAgICAgICAgaWYodGhpcy5tYXAucmVtb3ZlVGlsZSh7eCwgeX0sIHRoaXMuYWRkVG9MYXN0Q29tbWFuZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRvTGFzdENvbW1hbmQgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLm1hcC5hZGRUaWxlKHRoaXMudGV4dHVyZVByZXZpZXcsIHRoaXMuYWRkVG9MYXN0Q29tbWFuZClcbiAgICAgICAgICAgICAgdGhpcy5hZGRUb0xhc3RDb21tYW5kID0gdHJ1ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodGhpcy5sYXN0VGV4dHVyZVBsYWNlZEF0ICYmICFHYW1lLmV2ZW50cy5tb3VzZS5yaWdodERvd24pIHtcbiAgICAgICAgICB0aGlzLmxhc3RUZXh0dXJlUGxhY2VkQXQgPSBudWxsXG4gICAgICAgICAgdGhpcy5hZGRUb0xhc3RDb21tYW5kID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMudGV4dHVyZVByZXZpZXcgPSBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmxldCB1cGRhdGUgPSAoKSA9PiB7XG4gIHZpZXdQb3J0LnVwZGF0ZSgpXG59XG5cbmxldCBpbml0ID0gKCkgPT4ge1xuICBsZXQgY3R4ID0gR2FtZS5jdHhcbiAgbGV0IGNhbnZhcyA9IEdhbWUuY2FudmFzXG4gIGxldCBtYXAgPSBuZXcgTWFwKGNhbnZhcy53aWR0aCAqIDIsIGNhbnZhcy5oZWlnaHQgKiAyLCB0ZXh0dXJlU2l6ZSlcblxuICBsZXQgdmlld1BvcnRXaWR0aCA9IGNhbnZhcy53aWR0aCAtIChjYW52YXMud2lkdGggLyA1KVxuICBsZXQgdmlld1BvcnRIZWlnaHQgPSBjYW52YXMuaGVpZ2h0IC0gKGNhbnZhcy5oZWlnaHQgLyA1KVxuXG4gIHZpZXdQb3J0ID0gbmV3IFZpZXdQb3J0KHZpZXdQb3J0V2lkdGgsIHZpZXdQb3J0SGVpZ2h0LCBtYXApXG4gIGxldCB0ZXh0dXJlTWVudSA9IG5ldyBUZXh0dXJlTWVudShjYW52YXMsIHtcbiAgICBoZWlnaHQ6IEdhbWUuY2FudmFzLmhlaWdodCAtIHZpZXdQb3J0LmhlaWdodCxcbiAgICB2ZXJ0aWNhbEFsaWdubWVudDogXCJib3R0b21cIixcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMmExZDE2JyxcbiAgICB0ZXh0dXJlczogR2FtZS5Bc3NldE1hbmFnZXIuaW1nc1tcInRleHR1cmVzXCJdXG5cbiAgfSlcblxuICBsZXQgc2lkZU1lbnUgPSBuZXcgU2lkZU1lbnUoY2FudmFzLCBtYXAsIHZpZXdQb3J0KVxuXG4gIGxldCBncmlkID0gbmV3IEdyaWQobWFwLCB2aWV3UG9ydCwgdGV4dHVyZU1lbnUsIHNpZGVNZW51KVxuXG4gIEdhbWUudWlFbGVtZW50cy5wdXNoKFt0ZXh0dXJlTWVudSwgc2lkZU1lbnVdKVxuICBHYW1lLmVudmlyb25tZW50RWxlbWVudHMucHVzaChbbWFwLCBncmlkXSlcbn1cblxuZXhwb3J0IHsgaW5pdCwgdXBkYXRlIH1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFGQTtBQU9BO0FBQ0E7QUFGQTtBQU9BO0FBQ0E7QUFGQTtBQXJCQTtBQUZBO0FBZEE7QUFDQTtBQStDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeEVBO0FBQ0E7QUE0RUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBRkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBRkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBRkE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhFQTtBQUNBO0FBMEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQXRLQTtBQUNBO0FBd0tBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQS9IQTtBQUNBO0FBaUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/map_editor.js\n");

/***/ }),

/***/ "./src/mini_map.js":
/*!*************************!*\
  !*** ./src/mini_map.js ***!
  \*************************/
/*! exports provided: MiniMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MiniMap\", function() { return MiniMap; });\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./entity */ \"./src/entity.js\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collision */ \"./src/collision.js\");\n\n\n\nclass MiniMap extends _entity__WEBPACK_IMPORTED_MODULE_0__[\"Entity\"] {\n  constructor({ map, parent, viewPort }) {\n    let width = parent.width;\n    let height = map.height / map.width * width;\n    super(0, 0, parent.width, height);\n    this.name = \"MiniMap\";\n    this.scale = width / map.width;\n    this.inverseScale = 1 / this.scale;\n    this.map = map;\n    this.parent = parent;\n    this.viewPort = viewPort;\n    this.miniViewPort = this.initMiniViewPort();\n    this.backgroundColor = \"#222222\";\n    this.canvas = Game.canvas;\n    this.ctx = Game.ctx;\n  }\n\n  initMiniViewPort() {\n    let viewPortDimensions = {\n      width: this.viewPort.width,\n      height: this.viewPort.height\n    };\n    let dimensions = _collision__WEBPACK_IMPORTED_MODULE_1__[\"vectorProduct\"](this.scale, viewPortDimensions);\n    let position = _collision__WEBPACK_IMPORTED_MODULE_1__[\"vectorProduct\"](this.scale, this.viewPort.pos);\n\n    return {\n      width: dimensions.width,\n      height: dimensions.height,\n      pos: position,\n      color: \"#ffffff\"\n    };\n  }\n\n  updateMiniViewPort() {\n    if (_collision__WEBPACK_IMPORTED_MODULE_1__[\"intersects\"](this, Game.events.mouse)) {\n      if (Game.events.mouse.down) {\n        let x = (Game.events.mouse.x - this.miniViewPort.width / 2) * this.inverseScale;\n        let y = (Game.events.mouse.y - this.miniViewPort.height / 2) * this.inverseScale;\n        this.viewPort.safeMove(x, y);\n      }\n    }\n    let position = _collision__WEBPACK_IMPORTED_MODULE_1__[\"vectorProduct\"](this.scale, this.viewPort.pos);\n    this.miniViewPort.pos = position;\n  }\n\n  scaledTextureDetails(texture) {\n    return {\n      pos: _collision__WEBPACK_IMPORTED_MODULE_1__[\"vectorProduct\"](this.scale, texture.pos),\n      width: texture.width * this.scale,\n      height: texture.height * this.scale\n    };\n  }\n\n  draw() {\n    this.ctx.fillStyle = this.backgroundColor;\n    this.ctx.fillRect(this.pos.x, this.pos.y, this.width, this.height);\n\n    let startColumn = 0;\n    let startRow = 0;\n    let endColumn = Math.trunc(this.map.width % this.map.textureSize);\n    let endRow = Math.trunc(this.map.height % this.map.textureSize);\n\n    for (let column of this.map.map) {\n      for (let texture of column) {\n        if (texture === undefined) continue;\n        let textureDetails = this.scaledTextureDetails(texture);\n\n        this.ctx.drawImage(texture.img, textureDetails.pos.x, textureDetails.pos.y, textureDetails.width, textureDetails.height);\n      }\n    }\n\n    this.ctx.strokeStyle = this.miniViewPort.color;\n    this.ctx.lineWidth = 1;\n    this.ctx.strokeRect(this.miniViewPort.pos.x, this.miniViewPort.pos.y, this.miniViewPort.width, this.miniViewPort.height);\n  }\n\n  update() {\n    this.updateMiniViewPort();\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWluaV9tYXAuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL21pbmlfbWFwLmpzP2NlMjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtFbnRpdHl9IGZyb20gJy4vZW50aXR5J1xuaW1wb3J0ICogYXMgQ29sbGlzaW9uIGZyb20gJy4vY29sbGlzaW9uJ1xuXG5leHBvcnQgY2xhc3MgTWluaU1hcCBleHRlbmRzIEVudGl0eSB7XG4gIGNvbnN0cnVjdG9yKHttYXAsIHBhcmVudCwgdmlld1BvcnR9KSB7XG4gICAgbGV0IHdpZHRoID0gcGFyZW50LndpZHRoXG4gICAgbGV0IGhlaWdodCA9IChtYXAuaGVpZ2h0IC8gbWFwLndpZHRoKSAqIHdpZHRoXG4gICAgc3VwZXIoMCwgMCwgcGFyZW50LndpZHRoLCBoZWlnaHQpXG4gICAgdGhpcy5uYW1lID0gXCJNaW5pTWFwXCJcbiAgICB0aGlzLnNjYWxlID0gd2lkdGggLyBtYXAud2lkdGhcbiAgICB0aGlzLmludmVyc2VTY2FsZSA9IDEgLyB0aGlzLnNjYWxlXG4gICAgdGhpcy5tYXAgPSBtYXBcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudFxuICAgIHRoaXMudmlld1BvcnQgPSB2aWV3UG9ydFxuICAgIHRoaXMubWluaVZpZXdQb3J0ID0gdGhpcy5pbml0TWluaVZpZXdQb3J0KClcbiAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IFwiIzIyMjIyMlwiXG4gICAgdGhpcy5jYW52YXMgPSBHYW1lLmNhbnZhc1xuICAgIHRoaXMuY3R4ID0gR2FtZS5jdHhcbiAgfVxuXG4gIGluaXRNaW5pVmlld1BvcnQoKSB7XG4gICAgbGV0IHZpZXdQb3J0RGltZW5zaW9ucyA9IHtcbiAgICAgIHdpZHRoOiB0aGlzLnZpZXdQb3J0LndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLnZpZXdQb3J0LmhlaWdodFxuICAgIH1cbiAgICBsZXQgZGltZW5zaW9ucyA9IENvbGxpc2lvbi52ZWN0b3JQcm9kdWN0KHRoaXMuc2NhbGUsIHZpZXdQb3J0RGltZW5zaW9ucylcbiAgICBsZXQgcG9zaXRpb24gPSBDb2xsaXNpb24udmVjdG9yUHJvZHVjdCh0aGlzLnNjYWxlLCB0aGlzLnZpZXdQb3J0LnBvcylcblxuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogZGltZW5zaW9ucy53aWR0aCxcbiAgICAgIGhlaWdodDogZGltZW5zaW9ucy5oZWlnaHQsXG4gICAgICBwb3M6IHBvc2l0aW9uLFxuICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlTWluaVZpZXdQb3J0KCkge1xuICAgIGlmKENvbGxpc2lvbi5pbnRlcnNlY3RzKHRoaXMsIEdhbWUuZXZlbnRzLm1vdXNlKSkge1xuICAgICAgaWYoR2FtZS5ldmVudHMubW91c2UuZG93bikge1xuICAgICAgICBsZXQgeCA9IChHYW1lLmV2ZW50cy5tb3VzZS54IC0gKHRoaXMubWluaVZpZXdQb3J0LndpZHRoIC8gMikpICogdGhpcy5pbnZlcnNlU2NhbGVcbiAgICAgICAgbGV0IHkgPSAoR2FtZS5ldmVudHMubW91c2UueSAtICh0aGlzLm1pbmlWaWV3UG9ydC5oZWlnaHQgLyAyKSkgKiB0aGlzLmludmVyc2VTY2FsZVxuICAgICAgICB0aGlzLnZpZXdQb3J0LnNhZmVNb3ZlKHgsIHkpXG4gICAgICB9XG4gICAgfVxuICAgIGxldCBwb3NpdGlvbiA9IENvbGxpc2lvbi52ZWN0b3JQcm9kdWN0KHRoaXMuc2NhbGUsIHRoaXMudmlld1BvcnQucG9zKVxuICAgIHRoaXMubWluaVZpZXdQb3J0LnBvcyA9IHBvc2l0aW9uXG4gIH1cblxuICBzY2FsZWRUZXh0dXJlRGV0YWlscyh0ZXh0dXJlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvczogQ29sbGlzaW9uLnZlY3RvclByb2R1Y3QodGhpcy5zY2FsZSwgdGV4dHVyZS5wb3MpLFxuICAgICAgd2lkdGg6IHRleHR1cmUud2lkdGggKiB0aGlzLnNjYWxlLFxuICAgICAgaGVpZ2h0OiB0ZXh0dXJlLmhlaWdodCAqIHRoaXMuc2NhbGVcbiAgICB9XG4gIH1cblxuICBkcmF3KCkge1xuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuYmFja2dyb3VuZENvbG9yXG4gICAgdGhpcy5jdHguZmlsbFJlY3QodGhpcy5wb3MueCwgdGhpcy5wb3MueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpXG5cbiAgICBsZXQgc3RhcnRDb2x1bW4gPSAwXG4gICAgbGV0IHN0YXJ0Um93ID0gMFxuICAgIGxldCBlbmRDb2x1bW4gPSBNYXRoLnRydW5jKHRoaXMubWFwLndpZHRoICUgdGhpcy5tYXAudGV4dHVyZVNpemUpXG4gICAgbGV0IGVuZFJvdyA9IE1hdGgudHJ1bmModGhpcy5tYXAuaGVpZ2h0ICUgdGhpcy5tYXAudGV4dHVyZVNpemUpXG5cbiAgICBmb3IobGV0IGNvbHVtbiBvZiB0aGlzLm1hcC5tYXApIHtcbiAgICAgIGZvcihsZXQgdGV4dHVyZSBvZiBjb2x1bW4pIHtcbiAgICAgICAgaWYodGV4dHVyZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIGxldCB0ZXh0dXJlRGV0YWlscyA9IHRoaXMuc2NhbGVkVGV4dHVyZURldGFpbHModGV4dHVyZSlcblxuICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGV4dHVyZS5pbWcsIHRleHR1cmVEZXRhaWxzLnBvcy54LCB0ZXh0dXJlRGV0YWlscy5wb3MueSwgdGV4dHVyZURldGFpbHMud2lkdGgsIHRleHR1cmVEZXRhaWxzLmhlaWdodClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMubWluaVZpZXdQb3J0LmNvbG9yXG4gICAgdGhpcy5jdHgubGluZVdpZHRoID0gMVxuICAgIHRoaXMuY3R4LnN0cm9rZVJlY3QodGhpcy5taW5pVmlld1BvcnQucG9zLngsIHRoaXMubWluaVZpZXdQb3J0LnBvcy55LFxuICAgICAgICB0aGlzLm1pbmlWaWV3UG9ydC53aWR0aCwgdGhpcy5taW5pVmlld1BvcnQuaGVpZ2h0KVxuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIHRoaXMudXBkYXRlTWluaVZpZXdQb3J0KClcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEZBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/mini_map.js\n");

/***/ }),

/***/ "./src/ui/button.js":
/*!**************************!*\
  !*** ./src/ui/button.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Button; });\n/* harmony import */ var _ui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui_element */ \"./src/ui/ui_element.js\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../collision */ \"./src/collision.js\");\n\n\n\nclass Button extends _ui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(canvas, properties) {\n    super(canvas, properties);\n    this.name = \"UI.Button\";\n    this.event_object = properties[\"event_object\"];\n    this.text = properties[\"text\"];\n    this.clickAction = properties[\"clickAction\"];\n    this.clicked = false;\n    this.backgroundColor = properties[\"backgroundColor\"] || \"#cc6600\";\n    this.hoveredBackgroundColor = properties[\"hoveredBackgroundColor\"] || \"#da8e42\";\n    this.clickedBackgroundColor = properties[\"clickedBackgroundColor\"] || \"#bb4a00\";\n    this.fontSize = properties[\"fontSize\"] || 24;\n    this.font = this.fontSize + \"px \" + (properties[\"font\"] || 'amatic-bold');\n    this.textMargin = properties[\"textMargin\"] || 3;\n    Button.hoveredButtons = {};\n    Button.clickedButtons = {};\n  }\n\n  draw() {\n    this.ctx.beginPath();\n    if (Button.hoveredButtons[this.id]) {\n      if (Button.clickedButtons[this.id]) this.ctx.fillStyle = this.clickedBackgroundColor;else this.ctx.fillStyle = this.hoveredBackgroundColor;\n      $(this.canvas).css({ 'cursor': 'pointer' });\n    } else {\n      this.ctx.fillStyle = this.backgroundColor;\n      if (Object.keys(Button.hoveredButtons).length <= 0) $(this.canvas).css({ 'cursor': 'default' });\n    }\n    this.ctx.fillRect(this.pos.x, this.pos.y, this.width, this.height);\n\n    this.ctx.fillStyle = this.color;\n    this.ctx.font = this.font;\n    this.ctx.textBaseline = \"top\";\n\n    let textSize = this.ctx.measureText(this.text);\n    let textX = this.pos.x + this.width / 2 - textSize.width / 2;\n    let textY = this.pos.y + this.height / 2 - this.fontSize / 2 - this.textMargin;\n\n    this.ctx.fillText(this.text, textX, textY);\n  }\n\n  update() {\n    if (_collision__WEBPACK_IMPORTED_MODULE_1__[\"intersects\"](this, this.event_object.mouse)) {\n      Button.hoveredButtons[this.id] = true;\n      if (this.event_object.mouse.clicked) {\n        Button.clickedButtons[this.id] = true;\n        this.event_object.mouse.clicked = false;\n      } else if (Button.clickedButtons[this.id] && !this.event_object.mouse.down) {\n        delete Button.clickedButtons[this.id];\n        this.clickAction();\n      }\n    } else if (Button.hoveredButtons[this.id]) {\n      delete Button.hoveredButtons[this.id];\n    }\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWkvYnV0dG9uLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy91aS9idXR0b24uanM/ZmJjZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVUlFbGVtZW50IGZyb20gJy4vdWlfZWxlbWVudCdcbmltcG9ydCAqIGFzIENvbGxpc2lvbiBmcm9tICcuLi9jb2xsaXNpb24nXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1dHRvbiBleHRlbmRzIFVJRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhcywgcHJvcGVydGllcykge1xuICAgIHN1cGVyKGNhbnZhcywgcHJvcGVydGllcylcbiAgICB0aGlzLm5hbWUgPSBcIlVJLkJ1dHRvblwiXG4gICAgdGhpcy5ldmVudF9vYmplY3QgPSBwcm9wZXJ0aWVzW1wiZXZlbnRfb2JqZWN0XCJdXG4gICAgdGhpcy50ZXh0ID0gcHJvcGVydGllc1tcInRleHRcIl1cbiAgICB0aGlzLmNsaWNrQWN0aW9uID0gcHJvcGVydGllc1tcImNsaWNrQWN0aW9uXCJdXG4gICAgdGhpcy5jbGlja2VkID0gZmFsc2VcbiAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IHByb3BlcnRpZXNbXCJiYWNrZ3JvdW5kQ29sb3JcIl0gfHwgXCIjY2M2NjAwXCJcbiAgICB0aGlzLmhvdmVyZWRCYWNrZ3JvdW5kQ29sb3IgPSBwcm9wZXJ0aWVzW1wiaG92ZXJlZEJhY2tncm91bmRDb2xvclwiXSB8fCBcIiNkYThlNDJcIlxuICAgIHRoaXMuY2xpY2tlZEJhY2tncm91bmRDb2xvciA9IHByb3BlcnRpZXNbXCJjbGlja2VkQmFja2dyb3VuZENvbG9yXCJdIHx8IFwiI2JiNGEwMFwiXG4gICAgdGhpcy5mb250U2l6ZSA9IHByb3BlcnRpZXNbXCJmb250U2l6ZVwiXSB8fCAyNFxuICAgIHRoaXMuZm9udCA9IHRoaXMuZm9udFNpemUgKyBcInB4IFwiICsgKHByb3BlcnRpZXNbXCJmb250XCJdIHx8ICdhbWF0aWMtYm9sZCcpXG4gICAgdGhpcy50ZXh0TWFyZ2luID0gcHJvcGVydGllc1tcInRleHRNYXJnaW5cIl0gfHwgM1xuICAgIEJ1dHRvbi5ob3ZlcmVkQnV0dG9ucyA9IHt9XG4gICAgQnV0dG9uLmNsaWNrZWRCdXR0b25zID0ge31cbiAgfVxuXG4gIGRyYXcgKCkge1xuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpXG4gICAgaWYoQnV0dG9uLmhvdmVyZWRCdXR0b25zW3RoaXMuaWRdKSB7XG4gICAgICBpZihCdXR0b24uY2xpY2tlZEJ1dHRvbnNbdGhpcy5pZF0pXG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY2xpY2tlZEJhY2tncm91bmRDb2xvclxuICAgICAgZWxzZVxuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmhvdmVyZWRCYWNrZ3JvdW5kQ29sb3JcbiAgICAgICQodGhpcy5jYW52YXMpLmNzcyh7J2N1cnNvcicgOiAncG9pbnRlcid9KVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuYmFja2dyb3VuZENvbG9yXG4gICAgICBpZihPYmplY3Qua2V5cyhCdXR0b24uaG92ZXJlZEJ1dHRvbnMpLmxlbmd0aCA8PSAwKVxuICAgICAgICAkKHRoaXMuY2FudmFzKS5jc3MoeydjdXJzb3InIDogJ2RlZmF1bHQnfSlcbiAgICB9XG4gICAgdGhpcy5jdHguZmlsbFJlY3QodGhpcy5wb3MueCwgdGhpcy5wb3MueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpXG5cbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yXG4gICAgdGhpcy5jdHguZm9udCA9IHRoaXMuZm9udFxuICAgIHRoaXMuY3R4LnRleHRCYXNlbGluZSA9IFwidG9wXCJcblxuICAgIGxldCB0ZXh0U2l6ZSA9IHRoaXMuY3R4Lm1lYXN1cmVUZXh0KHRoaXMudGV4dClcbiAgICBsZXQgdGV4dFggPSB0aGlzLnBvcy54ICsgKHRoaXMud2lkdGggLyAyKSAtICh0ZXh0U2l6ZS53aWR0aCAvIDIpXG4gICAgbGV0IHRleHRZID0gdGhpcy5wb3MueSArICh0aGlzLmhlaWdodCAvIDIpIC0gKHRoaXMuZm9udFNpemUgLyAyKSAtIHRoaXMudGV4dE1hcmdpblxuXG4gICAgdGhpcy5jdHguZmlsbFRleHQodGhpcy50ZXh0LCB0ZXh0WCwgdGV4dFkpXG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgaWYgKENvbGxpc2lvbi5pbnRlcnNlY3RzKHRoaXMsIHRoaXMuZXZlbnRfb2JqZWN0Lm1vdXNlKSkge1xuICAgICAgQnV0dG9uLmhvdmVyZWRCdXR0b25zW3RoaXMuaWRdID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuZXZlbnRfb2JqZWN0Lm1vdXNlLmNsaWNrZWQpIHtcbiAgICAgICAgQnV0dG9uLmNsaWNrZWRCdXR0b25zW3RoaXMuaWRdID0gdHJ1ZVxuICAgICAgICB0aGlzLmV2ZW50X29iamVjdC5tb3VzZS5jbGlja2VkID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKEJ1dHRvbi5jbGlja2VkQnV0dG9uc1t0aGlzLmlkXSAmJiAhdGhpcy5ldmVudF9vYmplY3QubW91c2UuZG93bikge1xuICAgICAgICBkZWxldGUgQnV0dG9uLmNsaWNrZWRCdXR0b25zW3RoaXMuaWRdXG4gICAgICAgIHRoaXMuY2xpY2tBY3Rpb24oKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChCdXR0b24uaG92ZXJlZEJ1dHRvbnNbdGhpcy5pZF0pIHtcbiAgICAgIGRlbGV0ZSBCdXR0b24uaG92ZXJlZEJ1dHRvbnNbdGhpcy5pZF1cbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUE1REEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/ui/button.js\n");

/***/ }),

/***/ "./src/ui/grid.js":
/*!************************!*\
  !*** ./src/ui/grid.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Grid; });\n/* harmony import */ var _ui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui_element */ \"./src/ui/ui_element.js\");\n\n\nclass Grid extends _ui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(canvas, properties) {\n    super(canvas, properties);\n    this.name = \"UI.Grid\";\n  }\n\n  buildColumns(properties) {\n    const height = _ui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pixelDimension(properties[\"height\"], (properties[\"parent\"] || this.canvas).height);\n\n    const width = _ui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pixelDimension(properties[\"width\"], (properties[\"parent\"] || this.canvas).width);\n\n    this.rowHeight = properties[\"rowHeight\"] || parseInt(height / properties[\"rows\"].length);\n    this.columnWidth = parseInt(width / properties[\"rows\"][0].length);\n    this.rowMargin = properties[\"rowMargin\"] || 0;\n    this.columnMargin = properties[\"columnMargin\"] || 0;\n\n    properties[\"children\"] = [];\n\n    for (let row of properties[\"rows\"]) {\n      let columnIndex = 0;\n      for (let column of row) {\n        if (columnIndex < row.length - 1) {\n          column['properties']['display'] = 'inline';\n        }\n        column['properties']['height'] = this.rowHeight;\n        column['properties']['width'] = this.columnWidth;\n        column['properties']['topMargin'] = this.rowMargin;\n        column['properties']['bottomMargin'] = this.rowMargin;\n        column['properties']['margin'] = this.columnMargin;\n        properties['children'].push(column);\n        columnIndex++;\n      }\n    }\n  }\n\n  createChildElements(properties) {\n    console.log(\"Grid createChildElements\");\n    this.buildColumns(properties);\n    super.createChildElements(properties);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWkvZ3JpZC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvdWkvZ3JpZC5qcz9kYWUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVSUVsZW1lbnQgZnJvbSAnLi91aV9lbGVtZW50J1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmlkIGV4dGVuZHMgVUlFbGVtZW50IHtcbiAgY29uc3RydWN0b3IgKGNhbnZhcywgcHJvcGVydGllcykge1xuICAgIHN1cGVyKGNhbnZhcywgcHJvcGVydGllcylcbiAgICB0aGlzLm5hbWUgPSBcIlVJLkdyaWRcIlxuICB9XG5cbiAgYnVpbGRDb2x1bW5zKHByb3BlcnRpZXMpIHtcbiAgICBjb25zdCBoZWlnaHQgPSBVSUVsZW1lbnQucGl4ZWxEaW1lbnNpb24ocHJvcGVydGllc1tcImhlaWdodFwiXSxcbiAgICAgICAgKHByb3BlcnRpZXNbXCJwYXJlbnRcIl0gfHwgdGhpcy5jYW52YXMpLmhlaWdodClcblxuICAgIGNvbnN0IHdpZHRoID0gVUlFbGVtZW50LnBpeGVsRGltZW5zaW9uKHByb3BlcnRpZXNbXCJ3aWR0aFwiXSxcbiAgICAgICAgKHByb3BlcnRpZXNbXCJwYXJlbnRcIl0gfHwgdGhpcy5jYW52YXMpLndpZHRoKVxuXG4gICAgdGhpcy5yb3dIZWlnaHQgPSBwcm9wZXJ0aWVzW1wicm93SGVpZ2h0XCJdIHx8IHBhcnNlSW50KGhlaWdodCAvIHByb3BlcnRpZXNbXCJyb3dzXCJdLmxlbmd0aClcbiAgICB0aGlzLmNvbHVtbldpZHRoID0gcGFyc2VJbnQod2lkdGggLyBwcm9wZXJ0aWVzW1wicm93c1wiXVswXS5sZW5ndGgpXG4gICAgdGhpcy5yb3dNYXJnaW4gPSBwcm9wZXJ0aWVzW1wicm93TWFyZ2luXCJdIHx8IDBcbiAgICB0aGlzLmNvbHVtbk1hcmdpbiA9IHByb3BlcnRpZXNbXCJjb2x1bW5NYXJnaW5cIl0gfHwgMFxuXG4gICAgcHJvcGVydGllc1tcImNoaWxkcmVuXCJdID0gW11cblxuICAgIGZvcihsZXQgcm93IG9mIHByb3BlcnRpZXNbXCJyb3dzXCJdKSB7XG4gICAgICBsZXQgY29sdW1uSW5kZXggPSAwXG4gICAgICBmb3IobGV0IGNvbHVtbiBvZiByb3cpIHtcbiAgICAgICAgaWYoY29sdW1uSW5kZXggPCAocm93Lmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgY29sdW1uWydwcm9wZXJ0aWVzJ11bJ2Rpc3BsYXknXSA9ICdpbmxpbmUnXG4gICAgICAgIH1cbiAgICAgICAgY29sdW1uWydwcm9wZXJ0aWVzJ11bJ2hlaWdodCddID0gdGhpcy5yb3dIZWlnaHRcbiAgICAgICAgY29sdW1uWydwcm9wZXJ0aWVzJ11bJ3dpZHRoJ10gPSB0aGlzLmNvbHVtbldpZHRoXG4gICAgICAgIGNvbHVtblsncHJvcGVydGllcyddWyd0b3BNYXJnaW4nXSA9IHRoaXMucm93TWFyZ2luXG4gICAgICAgIGNvbHVtblsncHJvcGVydGllcyddWydib3R0b21NYXJnaW4nXSA9IHRoaXMucm93TWFyZ2luXG4gICAgICAgIGNvbHVtblsncHJvcGVydGllcyddWydtYXJnaW4nXSA9IHRoaXMuY29sdW1uTWFyZ2luXG4gICAgICAgIHByb3BlcnRpZXNbJ2NoaWxkcmVuJ10ucHVzaChjb2x1bW4pXG4gICAgICAgIGNvbHVtbkluZGV4KytcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjcmVhdGVDaGlsZEVsZW1lbnRzKHByb3BlcnRpZXMpIHtcbiAgICBjb25zb2xlLmxvZyhcIkdyaWQgY3JlYXRlQ2hpbGRFbGVtZW50c1wiKVxuICAgIHRoaXMuYnVpbGRDb2x1bW5zKHByb3BlcnRpZXMpXG4gICAgc3VwZXIuY3JlYXRlQ2hpbGRFbGVtZW50cyhwcm9wZXJ0aWVzKVxuICB9XG5cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/ui/grid.js\n");

/***/ }),

/***/ "./src/ui/popup_menu.js":
/*!******************************!*\
  !*** ./src/ui/popup_menu.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return PopupMenu; });\n/* harmony import */ var _ui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui_element */ \"./src/ui/ui_element.js\");\n\n\nclass PopupMenu extends _ui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(canvas, properties) {\n    defaultProperties = {\n      backgroundColor: '#dbcdae',\n      width: canvas.width / 2,\n      height: canvas.height * 0.66,\n      alignment: \"center\",\n      verticalAlignment: \"middle\"\n    };\n\n    super(canvas, Object.assign(defaultProperties, properties));\n    this.name = \"UI.PopupMenu\";\n    this.createChildElements(properties);\n  }\n\n  createChildElements(properties) {\n    this.children = [];\n    let lastChild = null;\n    if (properties[\"children\"]) {\n      for (let childData of properties[\"children\"]) {\n        let childClassName = childData[\"className\"];\n        let childProperties = childData[\"properties\"];\n        childProperties[\"parent\"] = this;\n        childProperties[\"previousSibling\"] = lastChild;\n        let child = new childClassName(this.canvas, childProperties);\n        this.children.push(child);\n        lastChild = child;\n      }\n    }\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWkvcG9wdXBfbWVudS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvdWkvcG9wdXBfbWVudS5qcz83NWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVSUVsZW1lbnQgZnJvbSAnLi91aV9lbGVtZW50J1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cE1lbnUgZXh0ZW5kcyBVSUVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihjYW52YXMsIHByb3BlcnRpZXMpIHtcbiAgICBkZWZhdWx0UHJvcGVydGllcyA9IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJyNkYmNkYWUnLFxuICAgICAgd2lkdGg6IGNhbnZhcy53aWR0aCAvIDIsXG4gICAgICBoZWlnaHQ6IGNhbnZhcy5oZWlnaHQgKiAwLjY2LFxuICAgICAgYWxpZ25tZW50OiBcImNlbnRlclwiLFxuICAgICAgdmVydGljYWxBbGlnbm1lbnQ6IFwibWlkZGxlXCJcbiAgICB9XG5cbiAgICBzdXBlcihjYW52YXMsIE9iamVjdC5hc3NpZ24oZGVmYXVsdFByb3BlcnRpZXMsIHByb3BlcnRpZXMpKVxuICAgIHRoaXMubmFtZSA9IFwiVUkuUG9wdXBNZW51XCJcbiAgICB0aGlzLmNyZWF0ZUNoaWxkRWxlbWVudHMocHJvcGVydGllcylcbiAgfVxuXG4gIGNyZWF0ZUNoaWxkRWxlbWVudHMocHJvcGVydGllcykge1xuICAgIHRoaXMuY2hpbGRyZW4gPSBbXVxuICAgIGxldCBsYXN0Q2hpbGQgPSBudWxsXG4gICAgaWYocHJvcGVydGllc1tcImNoaWxkcmVuXCJdKSB7XG4gICAgICBmb3IobGV0IGNoaWxkRGF0YSBvZiBwcm9wZXJ0aWVzW1wiY2hpbGRyZW5cIl0pIHtcbiAgICAgICAgbGV0IGNoaWxkQ2xhc3NOYW1lID0gY2hpbGREYXRhW1wiY2xhc3NOYW1lXCJdXG4gICAgICAgIGxldCBjaGlsZFByb3BlcnRpZXMgPSBjaGlsZERhdGFbXCJwcm9wZXJ0aWVzXCJdXG4gICAgICAgIGNoaWxkUHJvcGVydGllc1tcInBhcmVudFwiXSA9IHRoaXNcbiAgICAgICAgY2hpbGRQcm9wZXJ0aWVzW1wicHJldmlvdXNTaWJsaW5nXCJdID0gbGFzdENoaWxkXG4gICAgICAgIGxldCBjaGlsZCA9IG5ldyBjaGlsZENsYXNzTmFtZSh0aGlzLmNhbnZhcywgY2hpbGRQcm9wZXJ0aWVzKVxuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpXG4gICAgICAgIGxhc3RDaGlsZCA9IGNoaWxkXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE3QkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/ui/popup_menu.js\n");

/***/ }),

/***/ "./src/ui/progress_bar.js":
/*!********************************!*\
  !*** ./src/ui/progress_bar.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ProgressBar; });\n/* harmony import */ var _ui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui_element */ \"./src/ui/ui_element.js\");\n\n\nclass ProgressBar extends _ui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(canvas, properties) {\n    super(canvas, properties);\n    this.name = \"UI.ProgressBar\";\n    this.total = properties[\"total\"];\n    this.progress = 0;\n  }\n\n  draw() {\n    this.ctx.beginPath();\n    this.ctx.rect(this.pos.x, this.pos.y, this.width, this.height);\n    this.ctx.lineWidth = this.borderWidth;\n    this.ctx.strokeStyle = this.color;\n    this.ctx.stroke();\n\n    this.ctx.beginPath();\n    this.ctx.fillStyle = this.color;\n    this.ctx.fillRect(this.pos.x, this.pos.y, this.calculateWidth(), this.height);\n  }\n\n  calculateWidth() {\n    return this.width * (this.progress / this.total);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWkvcHJvZ3Jlc3NfYmFyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy91aS9wcm9ncmVzc19iYXIuanM/NmYzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVUlFbGVtZW50IGZyb20gJy4vdWlfZWxlbWVudCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZ3Jlc3NCYXIgZXh0ZW5kcyBVSUVsZW1lbnQge1xuICBjb25zdHJ1Y3RvciAoY2FudmFzLCBwcm9wZXJ0aWVzKSB7XG4gICAgc3VwZXIoY2FudmFzLCBwcm9wZXJ0aWVzKVxuICAgIHRoaXMubmFtZSA9IFwiVUkuUHJvZ3Jlc3NCYXJcIlxuICAgIHRoaXMudG90YWwgPSBwcm9wZXJ0aWVzW1widG90YWxcIl1cbiAgICB0aGlzLnByb2dyZXNzID0gMFxuICB9XG5cbiAgZHJhdyAoKSB7XG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKClcbiAgICB0aGlzLmN0eC5yZWN0KHRoaXMucG9zLngsIHRoaXMucG9zLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KVxuICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMuYm9yZGVyV2lkdGhcbiAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3JcbiAgICB0aGlzLmN0eC5zdHJva2UoKVxuXG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKClcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yXG4gICAgdGhpcy5jdHguZmlsbFJlY3QodGhpcy5wb3MueCwgdGhpcy5wb3MueSwgdGhpcy5jYWxjdWxhdGVXaWR0aCgpLCB0aGlzLmhlaWdodClcbiAgfVxuXG4gIGNhbGN1bGF0ZVdpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLndpZHRoICogKHRoaXMucHJvZ3Jlc3MgLyB0aGlzLnRvdGFsKVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdEJBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/ui/progress_bar.js\n");

/***/ }),

/***/ "./src/ui/ui.js":
/*!**********************!*\
  !*** ./src/ui/ui.js ***!
  \**********************/
/*! exports provided: UI */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UI\", function() { return UI; });\n/* harmony import */ var _ui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui_element */ \"./src/ui/ui_element.js\");\n/* harmony import */ var _grid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./grid */ \"./src/ui/grid.js\");\n/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./button */ \"./src/ui/button.js\");\n/* harmony import */ var _progress_bar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./progress_bar */ \"./src/ui/progress_bar.js\");\n/* harmony import */ var _popup_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./popup_menu */ \"./src/ui/popup_menu.js\");\n\n\n\n\n\n\nlet UI = { UIElement: _ui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"], Button: _button__WEBPACK_IMPORTED_MODULE_2__[\"default\"], ProgressBar: _progress_bar__WEBPACK_IMPORTED_MODULE_3__[\"default\"], Grid: _grid__WEBPACK_IMPORTED_MODULE_1__[\"default\"], PopupMenu: _popup_menu__WEBPACK_IMPORTED_MODULE_4__[\"default\"] };\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWkvdWkuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3VpL3VpLmpzP2E2NjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVJRWxlbWVudCBmcm9tICcuL3VpX2VsZW1lbnQnXG5pbXBvcnQgR3JpZCBmcm9tICcuL2dyaWQnXG5pbXBvcnQgQnV0dG9uIGZyb20gJy4vYnV0dG9uJ1xuaW1wb3J0IFByb2dyZXNzQmFyIGZyb20gJy4vcHJvZ3Jlc3NfYmFyJ1xuaW1wb3J0IFBvcHVwTWVudSBmcm9tICcuL3BvcHVwX21lbnUnXG5cbmxldCBVSSA9IHsgVUlFbGVtZW50LCBCdXR0b24sIFByb2dyZXNzQmFyLCBHcmlkLCBQb3B1cE1lbnV9XG5cbmV4cG9ydCB7IFVJIH1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/ui/ui.js\n");

/***/ }),

/***/ "./src/ui/ui_element.js":
/*!******************************!*\
  !*** ./src/ui/ui_element.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return UIElement; });\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../entity */ \"./src/entity.js\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../collision */ \"./src/collision.js\");\n\n\n\nclass UIElement extends _entity__WEBPACK_IMPORTED_MODULE_0__[\"Entity\"] {\n  // If you create a new object that inherits from UIElement, and it has\n  // children, you must add the child info/structure to the properties before\n  // calling super\n  constructor(canvas, properties) {\n    let entityProps = UIElement.calculateDimensionAndPosition(canvas, properties);\n    super(entityProps.x, entityProps.y, entityProps.width, entityProps.height);\n    this.name = \"UIElement\";\n    this.canvas = canvas;\n    this.parent = entityProps.parent;\n    this.color = properties[\"color\"] || \"#ffffff\";\n    this.backgroundColor = properties[\"backgroundColor\"];\n    this.borderWidth = properties[\"borderWidth\"] || 0;\n    this.visible = properties[\"visible\"] || true;\n\n    this.createChildElements(properties);\n  }\n\n  createChildElements(properties) {\n    console.log(\"UIElement createChildElements\");\n    this.children = [];\n    let lastChild = null;\n\n    if (properties[\"children\"]) {\n      for (let childData of properties[\"children\"]) {\n        let childClassName = childData[\"className\"];\n        let childProperties = childData[\"properties\"];\n        childProperties[\"parent\"] = this;\n        childProperties[\"previousSibling\"] = lastChild;\n        let child = childClassName.prototype instanceof UIElement ? new childClassName(this.canvas, childProperties) : new childClassName(childProperties);\n        this.children.push(child);\n        lastChild = child;\n      }\n    }\n  }\n\n  static pixelDimension(value, parentValue) {\n    if (typeof value == \"string\") {\n      let valuePercent = value.slice(0, -1);\n      value = parentValue * (parseInt(valuePercent) / 100);\n    } else if (value === undefined) {\n      value = parentValue;\n    }\n    return value;\n  }\n\n  static calculateDimensionAndPosition(canvas, properties) {\n    const parent = properties[\"parent\"] || canvas;\n    const margin = properties[\"margin\"] || 0;\n    const leftMargin = properties[\"leftMargin\"] || margin;\n    const rightMargin = properties[\"rightMargin\"] || margin;\n    const topMargin = properties[\"topMargin\"] || margin;\n    const bottomMargin = properties[\"bottomMargin\"] || margin;\n    const display = properties[\"display\"] || \"block\";\n    const previousSibling = properties[\"previousSibling\"];\n    const position = properties[\"position\"];\n\n    let x, y, height, width;\n\n    width = UIElement.pixelDimension(properties[\"width\"], parent.width);\n    height = UIElement.pixelDimension(properties[\"height\"], parent.height);\n\n    if (position) {\n      x = position.x;\n      y = position.y;\n    } else {\n      switch (properties[\"alignment\"]) {\n        case \"center\":\n          x = parent.pos.x + (parent.width / 2 - width / 2);\n          break;\n        case \"right\":\n          x = parent.pos.x + parent.width - width - (rightMargin || margin);\n          break;\n        default:\n          if (display == 'block' || !previousSibling) {\n            x = parent.pos.x + leftMargin;\n          } else {\n            x = previousSibling.pos.x + previousSibling.width + leftMargin;\n          }\n      }\n\n      switch (properties[\"verticalAlignment\"]) {\n        case \"middle\":\n          y = parent.pos.y + (parent.height / 2 - height / 2);\n          break;\n        case \"bottom\":\n          y = parent.pos.y + parent.height - height - (topMargin || margin);\n          break;\n        default:\n          if (display == 'block' && previousSibling) {\n            y = previousSibling.pos.y + previousSibling.height + topMargin;\n          } else {\n            y = parent.pos.y + topMargin;\n          }\n      }\n    }\n\n    return { x, y, width, height, parent };\n  }\n\n  show() {\n    this.visible = true;\n  }\n\n  hide() {\n    this.visible = false;\n  }\n\n  toggle() {\n    this.visible = !this.visible;\n  }\n\n  draw() {\n    if (this.visible) {\n      if (this.borderWidth) {\n        this.ctx.beginPath();\n        this.ctx.rect(this.pos.x, this.pos.y, this.width, this.height);\n        this.ctx.lineWidth = this.borderWidth;\n        this.ctx.strokeStyle = this.color;\n        this.ctx.stroke();\n      }\n\n      if (this.backgroundColor) {\n        this.ctx.fillStyle = this.backgroundColor;\n        this.ctx.fillRect(this.pos.x, this.pos.y, this.width, this.height);\n      }\n\n      for (let child of this.children) {\n        child.draw();\n      }\n    }\n  }\n\n  update() {\n    for (let child of this.children) {\n      child.update();\n    }\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWkvdWlfZWxlbWVudC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvdWkvdWlfZWxlbWVudC5qcz8xZDVmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4uL2VudGl0eSdcbmltcG9ydCAqIGFzIENvbGxpc2lvbiBmcm9tICcuLi9jb2xsaXNpb24nXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVJRWxlbWVudCBleHRlbmRzIEVudGl0eSB7XG4gIC8vIElmIHlvdSBjcmVhdGUgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSBVSUVsZW1lbnQsIGFuZCBpdCBoYXNcbiAgLy8gY2hpbGRyZW4sIHlvdSBtdXN0IGFkZCB0aGUgY2hpbGQgaW5mby9zdHJ1Y3R1cmUgdG8gdGhlIHByb3BlcnRpZXMgYmVmb3JlXG4gIC8vIGNhbGxpbmcgc3VwZXJcbiAgY29uc3RydWN0b3IoY2FudmFzLCBwcm9wZXJ0aWVzKSB7XG4gICAgbGV0IGVudGl0eVByb3BzID0gVUlFbGVtZW50LmNhbGN1bGF0ZURpbWVuc2lvbkFuZFBvc2l0aW9uKGNhbnZhcywgcHJvcGVydGllcylcbiAgICBzdXBlcihlbnRpdHlQcm9wcy54LCBlbnRpdHlQcm9wcy55LCBlbnRpdHlQcm9wcy53aWR0aCwgZW50aXR5UHJvcHMuaGVpZ2h0KVxuICAgIHRoaXMubmFtZSA9IFwiVUlFbGVtZW50XCJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhc1xuICAgIHRoaXMucGFyZW50ID0gZW50aXR5UHJvcHMucGFyZW50XG4gICAgdGhpcy5jb2xvciA9IHByb3BlcnRpZXNbXCJjb2xvclwiXSB8fCBcIiNmZmZmZmZcIlxuICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gcHJvcGVydGllc1tcImJhY2tncm91bmRDb2xvclwiXVxuICAgIHRoaXMuYm9yZGVyV2lkdGggPSBwcm9wZXJ0aWVzW1wiYm9yZGVyV2lkdGhcIl0gfHwgMFxuICAgIHRoaXMudmlzaWJsZSA9IHByb3BlcnRpZXNbXCJ2aXNpYmxlXCJdIHx8IHRydWVcblxuICAgIHRoaXMuY3JlYXRlQ2hpbGRFbGVtZW50cyhwcm9wZXJ0aWVzKVxuICB9XG5cbiAgY3JlYXRlQ2hpbGRFbGVtZW50cyhwcm9wZXJ0aWVzKSB7XG4gICAgY29uc29sZS5sb2coXCJVSUVsZW1lbnQgY3JlYXRlQ2hpbGRFbGVtZW50c1wiKVxuICAgIHRoaXMuY2hpbGRyZW4gPSBbXVxuICAgIGxldCBsYXN0Q2hpbGQgPSBudWxsXG5cbiAgICBpZihwcm9wZXJ0aWVzW1wiY2hpbGRyZW5cIl0pIHtcbiAgICAgIGZvcihsZXQgY2hpbGREYXRhIG9mIHByb3BlcnRpZXNbXCJjaGlsZHJlblwiXSkge1xuICAgICAgICBsZXQgY2hpbGRDbGFzc05hbWUgPSBjaGlsZERhdGFbXCJjbGFzc05hbWVcIl1cbiAgICAgICAgbGV0IGNoaWxkUHJvcGVydGllcyA9IGNoaWxkRGF0YVtcInByb3BlcnRpZXNcIl1cbiAgICAgICAgY2hpbGRQcm9wZXJ0aWVzW1wicGFyZW50XCJdID0gdGhpc1xuICAgICAgICBjaGlsZFByb3BlcnRpZXNbXCJwcmV2aW91c1NpYmxpbmdcIl0gPSBsYXN0Q2hpbGRcbiAgICAgICAgbGV0IGNoaWxkID0gY2hpbGRDbGFzc05hbWUucHJvdG90eXBlIGluc3RhbmNlb2YgVUlFbGVtZW50ID9cbiAgICAgICAgICBuZXcgY2hpbGRDbGFzc05hbWUodGhpcy5jYW52YXMsIGNoaWxkUHJvcGVydGllcykgOlxuICAgICAgICAgIG5ldyBjaGlsZENsYXNzTmFtZShjaGlsZFByb3BlcnRpZXMpXG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZClcbiAgICAgICAgbGFzdENoaWxkID0gY2hpbGRcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcGl4ZWxEaW1lbnNpb24odmFsdWUsIHBhcmVudFZhbHVlKSB7XG4gICAgaWYodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpIHtcbiAgICAgIGxldCB2YWx1ZVBlcmNlbnQgPSB2YWx1ZS5zbGljZSgwLCAtMSlcbiAgICAgIHZhbHVlID0gcGFyZW50VmFsdWUgKiAocGFyc2VJbnQodmFsdWVQZXJjZW50KSAvIDEwMClcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFsdWUgPSBwYXJlbnRWYWx1ZVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIHN0YXRpYyBjYWxjdWxhdGVEaW1lbnNpb25BbmRQb3NpdGlvbihjYW52YXMsIHByb3BlcnRpZXMpIHtcbiAgICBjb25zdCBwYXJlbnQgPSBwcm9wZXJ0aWVzW1wicGFyZW50XCJdIHx8IGNhbnZhc1xuICAgIGNvbnN0IG1hcmdpbiA9IHByb3BlcnRpZXNbXCJtYXJnaW5cIl0gfHwgMFxuICAgIGNvbnN0IGxlZnRNYXJnaW4gPSBwcm9wZXJ0aWVzW1wibGVmdE1hcmdpblwiXSB8fCBtYXJnaW5cbiAgICBjb25zdCByaWdodE1hcmdpbiA9IHByb3BlcnRpZXNbXCJyaWdodE1hcmdpblwiXSB8fCBtYXJnaW5cbiAgICBjb25zdCB0b3BNYXJnaW4gPSBwcm9wZXJ0aWVzW1widG9wTWFyZ2luXCJdIHx8IG1hcmdpblxuICAgIGNvbnN0IGJvdHRvbU1hcmdpbiA9IHByb3BlcnRpZXNbXCJib3R0b21NYXJnaW5cIl0gfHwgbWFyZ2luXG4gICAgY29uc3QgZGlzcGxheSA9IHByb3BlcnRpZXNbXCJkaXNwbGF5XCJdIHx8IFwiYmxvY2tcIlxuICAgIGNvbnN0IHByZXZpb3VzU2libGluZyA9IHByb3BlcnRpZXNbXCJwcmV2aW91c1NpYmxpbmdcIl1cbiAgICBjb25zdCBwb3NpdGlvbiA9IHByb3BlcnRpZXNbXCJwb3NpdGlvblwiXVxuXG4gICAgbGV0IHgsIHksIGhlaWdodCwgd2lkdGhcblxuICAgIHdpZHRoID0gVUlFbGVtZW50LnBpeGVsRGltZW5zaW9uKHByb3BlcnRpZXNbXCJ3aWR0aFwiXSwgcGFyZW50LndpZHRoKVxuICAgIGhlaWdodCA9IFVJRWxlbWVudC5waXhlbERpbWVuc2lvbihwcm9wZXJ0aWVzW1wiaGVpZ2h0XCJdLCBwYXJlbnQuaGVpZ2h0KVxuXG4gICAgaWYocG9zaXRpb24pIHtcbiAgICAgIHggPSBwb3NpdGlvbi54XG4gICAgICB5ID0gcG9zaXRpb24ueVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHN3aXRjaCAocHJvcGVydGllc1tcImFsaWdubWVudFwiXSkge1xuICAgICAgICBjYXNlIFwiY2VudGVyXCI6XG4gICAgICAgICAgeCA9IHBhcmVudC5wb3MueCArICgocGFyZW50LndpZHRoIC8gMikgLSAod2lkdGggLyAyKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICB4ID0gKHBhcmVudC5wb3MueCArIHBhcmVudC53aWR0aCAtIHdpZHRoKSAtIChyaWdodE1hcmdpbiB8fCBtYXJnaW4pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZihkaXNwbGF5ID09ICdibG9jaycgfHwgIXByZXZpb3VzU2libGluZykge1xuICAgICAgICAgICAgeCA9IHBhcmVudC5wb3MueCArIGxlZnRNYXJnaW5cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB4ID0gcHJldmlvdXNTaWJsaW5nLnBvcy54ICsgcHJldmlvdXNTaWJsaW5nLndpZHRoICsgbGVmdE1hcmdpblxuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChwcm9wZXJ0aWVzW1widmVydGljYWxBbGlnbm1lbnRcIl0pIHtcbiAgICAgICAgY2FzZSBcIm1pZGRsZVwiOlxuICAgICAgICAgIHkgPSBwYXJlbnQucG9zLnkgKyAoKHBhcmVudC5oZWlnaHQgLyAyKSAtIChoZWlnaHQgLyAyKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIFwiYm90dG9tXCI6XG4gICAgICAgICAgeSA9IChwYXJlbnQucG9zLnkgKyBwYXJlbnQuaGVpZ2h0IC0gaGVpZ2h0KSAtICh0b3BNYXJnaW4gfHwgbWFyZ2luKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYoZGlzcGxheSA9PSAnYmxvY2snICYmIHByZXZpb3VzU2libGluZykge1xuICAgICAgICAgICAgeSA9IHByZXZpb3VzU2libGluZy5wb3MueSArIHByZXZpb3VzU2libGluZy5oZWlnaHQgKyB0b3BNYXJnaW5cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB5ID0gcGFyZW50LnBvcy55ICsgdG9wTWFyZ2luXG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHgsIHksIHdpZHRoLCBoZWlnaHQsIHBhcmVudCB9XG4gIH1cblxuICBzaG93KCkge1xuICAgIHRoaXMudmlzaWJsZSA9IHRydWVcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZSgpIHtcbiAgICB0aGlzLnZpc2libGUgPSAhdGhpcy52aXNpYmxlXG4gIH1cblxuICBkcmF3KCkge1xuICAgIGlmKHRoaXMudmlzaWJsZSkge1xuICAgICAgaWYodGhpcy5ib3JkZXJXaWR0aCkge1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKVxuICAgICAgICB0aGlzLmN0eC5yZWN0KHRoaXMucG9zLngsIHRoaXMucG9zLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KVxuICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSB0aGlzLmJvcmRlcldpZHRoXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvclxuICAgICAgICB0aGlzLmN0eC5zdHJva2UoKVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmJhY2tncm91bmRDb2xvcikge1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmJhY2tncm91bmRDb2xvclxuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh0aGlzLnBvcy54LCB0aGlzLnBvcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodClcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgIGNoaWxkLmRyYXcoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBmb3IobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgIGNoaWxkLnVwZGF0ZSgpXG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFiQTtBQUNBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFiQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL0lBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/ui/ui_element.js\n");

/***/ }),

/***/ "./src/view_port.js":
/*!**************************!*\
  !*** ./src/view_port.js ***!
  \**************************/
/*! exports provided: ViewPort */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ViewPort\", function() { return ViewPort; });\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./entity */ \"./src/entity.js\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collision */ \"./src/collision.js\");\n\n\n\nclass ViewPort extends _entity__WEBPACK_IMPORTED_MODULE_0__[\"Entity\"] {\n  constructor(width, height, map) {\n    super(0, 0, width, height);\n    this.name = \"ViewPort\";\n    this.relativePos = {\n      x: Game.canvas.width - width,\n      y: 0\n    };\n    this.speed = 2;\n    this.positionAtDragStart = null;\n    this.map = map;\n    this.map.viewPort = this;\n  }\n\n  maxX() {\n    return this.map.width - this.width;\n  }\n\n  maxY() {\n    return this.map.height - this.height;\n  }\n\n  moveToObject(pos) {\n    if (!_collision__WEBPACK_IMPORTED_MODULE_1__[\"intersects\"](this, pos)) {\n      let x = pos.x - this.width / 2;\n      let y = pos.y - this.height / 2;\n\n      this.safeMove(x, y);\n    }\n  }\n\n  update() {\n    if (Game.events.keysDown[37]) this.safeMove(this.pos.x - this.speed, this.pos.y);\n\n    if (Game.events.keysDown[38]) this.safeMove(this.pos.x, this.pos.y - this.speed);\n\n    if (Game.events.keysDown[39]) this.safeMove(this.pos.x + this.speed, this.pos.y);\n\n    if (Game.events.keysDown[40]) this.safeMove(this.pos.x, this.pos.y + this.speed);\n\n    if (Game.state == 'map_editor' && Game.events.mouse.dragging) {\n      let dragStartPositionOnMap = Game.events.mouse.dragStart;\n      if (_collision__WEBPACK_IMPORTED_MODULE_1__[\"intersects\"](this, dragStartPositionOnMap, 0, true)) {\n        if (this.positionAtDragStart === null) {\n          this.positionAtDragStart = Object.assign({}, this.pos);\n          $(Game.canvas).css({ 'cursor': 'move' });\n        }\n\n        let start = Game.events.mouse.dragStart;\n        let end = { x: Game.events.mouse.x, y: Game.events.mouse.y };\n        let moveVector = _collision__WEBPACK_IMPORTED_MODULE_1__[\"vectorDifference\"](start, end);\n\n        let movePosition = _collision__WEBPACK_IMPORTED_MODULE_1__[\"vectorSum\"](this.positionAtDragStart, moveVector);\n        this.safeMove(movePosition.x, movePosition.y);\n      }\n    } else {\n      this.positionAtDragStart = null;\n    }\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld19wb3J0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy92aWV3X3BvcnQuanM/YjczNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL2VudGl0eSdcbmltcG9ydCAqIGFzIENvbGxpc2lvbiBmcm9tICcuL2NvbGxpc2lvbidcblxuZXhwb3J0IGNsYXNzIFZpZXdQb3J0IGV4dGVuZHMgRW50aXR5IHtcbiAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCwgbWFwKSB7XG4gICAgc3VwZXIoMCwgMCwgd2lkdGgsIGhlaWdodClcbiAgICB0aGlzLm5hbWUgPSBcIlZpZXdQb3J0XCJcbiAgICB0aGlzLnJlbGF0aXZlUG9zID0ge1xuICAgICAgeDogR2FtZS5jYW52YXMud2lkdGggLSB3aWR0aCxcbiAgICAgIHk6IDBcbiAgICB9XG4gICAgdGhpcy5zcGVlZCA9IDJcbiAgICB0aGlzLnBvc2l0aW9uQXREcmFnU3RhcnQgPSBudWxsXG4gICAgdGhpcy5tYXAgPSBtYXBcbiAgICB0aGlzLm1hcC52aWV3UG9ydCA9IHRoaXNcbiAgfVxuXG4gIG1heFgoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLndpZHRoIC0gdGhpcy53aWR0aFxuICB9XG5cbiAgbWF4WSgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuaGVpZ2h0IC0gdGhpcy5oZWlnaHRcbiAgfVxuXG4gIG1vdmVUb09iamVjdChwb3MpIHtcbiAgICBpZiAoIUNvbGxpc2lvbi5pbnRlcnNlY3RzKHRoaXMsIHBvcykpIHtcbiAgICAgIGxldCB4ID0gcG9zLnggLSAodGhpcy53aWR0aCAvIDIpXG4gICAgICBsZXQgeSA9IHBvcy55IC0gKHRoaXMuaGVpZ2h0IC8gMilcblxuICAgICAgdGhpcy5zYWZlTW92ZSh4LCB5KVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBpZihHYW1lLmV2ZW50cy5rZXlzRG93blszN10pXG4gICAgICB0aGlzLnNhZmVNb3ZlKHRoaXMucG9zLnggLSB0aGlzLnNwZWVkLCB0aGlzLnBvcy55KVxuXG4gICAgaWYoR2FtZS5ldmVudHMua2V5c0Rvd25bMzhdKSBcbiAgICAgIHRoaXMuc2FmZU1vdmUodGhpcy5wb3MueCwgdGhpcy5wb3MueSAtIHRoaXMuc3BlZWQpXG5cbiAgICBpZihHYW1lLmV2ZW50cy5rZXlzRG93blszOV0pXG4gICAgICB0aGlzLnNhZmVNb3ZlKHRoaXMucG9zLnggKyB0aGlzLnNwZWVkLCB0aGlzLnBvcy55KVxuXG4gICAgaWYoR2FtZS5ldmVudHMua2V5c0Rvd25bNDBdKVxuICAgICAgdGhpcy5zYWZlTW92ZSh0aGlzLnBvcy54LCB0aGlzLnBvcy55ICsgdGhpcy5zcGVlZClcblxuICAgIGlmKEdhbWUuc3RhdGUgPT0gJ21hcF9lZGl0b3InICYmIEdhbWUuZXZlbnRzLm1vdXNlLmRyYWdnaW5nKSB7XG4gICAgICBsZXQgZHJhZ1N0YXJ0UG9zaXRpb25Pbk1hcCA9IEdhbWUuZXZlbnRzLm1vdXNlLmRyYWdTdGFydFxuICAgICAgaWYoQ29sbGlzaW9uLmludGVyc2VjdHModGhpcywgZHJhZ1N0YXJ0UG9zaXRpb25Pbk1hcCwgMCwgdHJ1ZSkpIHtcbiAgICAgICAgaWYodGhpcy5wb3NpdGlvbkF0RHJhZ1N0YXJ0ID09PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5wb3NpdGlvbkF0RHJhZ1N0YXJ0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wb3MpXG4gICAgICAgICAgJChHYW1lLmNhbnZhcykuY3NzKHsnY3Vyc29yJyA6ICdtb3ZlJ30pXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RhcnQgPSBHYW1lLmV2ZW50cy5tb3VzZS5kcmFnU3RhcnRcbiAgICAgICAgbGV0IGVuZCA9IHsgeDogR2FtZS5ldmVudHMubW91c2UueCwgeTogR2FtZS5ldmVudHMubW91c2UueSB9XG4gICAgICAgIGxldCBtb3ZlVmVjdG9yID0gQ29sbGlzaW9uLnZlY3RvckRpZmZlcmVuY2Uoc3RhcnQsIGVuZClcblxuICAgICAgICBsZXQgbW92ZVBvc2l0aW9uID0gQ29sbGlzaW9uLnZlY3RvclN1bSh0aGlzLnBvc2l0aW9uQXREcmFnU3RhcnQsIG1vdmVWZWN0b3IpXG4gICAgICAgIHRoaXMuc2FmZU1vdmUobW92ZVBvc2l0aW9uLngsIG1vdmVQb3NpdGlvbi55KVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMucG9zaXRpb25BdERyYWdTdGFydCA9IG51bGxcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBL0RBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/view_port.js\n");

/***/ })

/******/ });